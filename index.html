<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XShare | Campus to Career</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6a5acd;       /* Slate Blue (violet) */
            --secondary: #8a7ffb;     /* Light Violet */
            --accent: #7ec8e3;        /* Soft Sky Blue */
            --background: #f9fafd;    /* Very Light Blue Background */
            --text-primary: #4b3f72;  /* Dark Violet */
            --card-bg: #ffffff;
            --shadow: rgba(123, 104, 238, 0.2); /* Violet shadow */
            --notification-unread: #f0f4ff;
            --notification-hover: #e6e9ff;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --info: #2196f3;
            --footer-bg: #4b3f72;
            --footer-text: #ffffff;
        }

        /* Dark Theme Variables */
        [data-theme="dark"] {
            --primary: #8a7ffb;
            --secondary: #9d94ff;
            --accent: #5eb9d9;
            --background: #1a1a2e;
            --text-primary: #e6e6ff;
            --card-bg: #16213e;
            --shadow: rgba(0, 0, 0, 0.3);
            --notification-unread: #2a2a4a;
            --notification-hover: #3a3a5a;
            --footer-bg: #0f0f1f;
            --footer-text: #e6e6ff;
        }

        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body {
  background-color: var(--background);
  color: var(--text-primary);
  line-height: 1.6;
  min-height: 100vh;
  transition: all 0.3s ease;

  display: flex;
  flex-direction: column; /* stack header + content + footer */
}


        .container { width:100%; max-width:1200px; margin:0 auto; padding:0 20px; }
        
        /* Theme Toggle */
        .theme-toggle { position: fixed; bottom: 20px; right: 20px; z-index: 1000; width: 50px; height: 50px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.2); border: none; }
        .theme-toggle i { font-size: 1.2rem; }


        /* Footer */
        footer {
  background-color: var(--footer-bg);
  color: var(--footer-text);
  padding: 40px 0;
  margin-top: 50px;
  margin-left: 250px;   /* ‚úÖ align footer with main-content, clear the sidebar */
  position: relative;
  z-index: 1;
}

        .footer-content { display: flex; flex-wrap: wrap; justify-content: space-between; }
        .footer-section { flex: 1; min-width: 250px; margin-bottom: 20px; }
        .footer-section h3 { margin-bottom: 15px; font-size: 1.2rem; }
        .footer-section p { margin-bottom: 10px; font-size: 0.9rem; }
        .footer-section a { color: var(--footer-text); text-decoration: none; opacity: 0.8; transition: opacity 0.3s; display: block; margin-bottom: 8px; }
        .footer-section a:hover { opacity: 1; }
        .social-icons { display: flex; gap: 15px; margin-top: 15px; }
        .social-icons a { font-size: 1.2rem; }
        .footer-bottom { text-align: center; padding-top: 20px; margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.9rem; }

        /* Auth Pages Container */
        .auth-container { display:flex; min-height:100vh; }
        .auth-left { flex:1; background: linear-gradient(135deg, var(--primary), var(--secondary)); color:white; display:flex; flex-direction:column; justify-content:center; padding:40px; position:relative; overflow:hidden; }
        .auth-left::before { content:''; position:absolute; inset:0; background:url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') center/cover; opacity:0.2; }
        .auth-left-content { position:relative; z-index:2; }
        .auth-left h1 { font-size:2.5rem; margin-bottom:20px; }
        .auth-left p { font-size:1.1rem; margin-bottom:30px; max-width:500px; }
        .auth-right { flex:1; display:flex; flex-direction:column; justify-content:center; padding:40px; background-color:var(--background); }
        .auth-form { max-width:400px; width:100%; margin:0 auto; }
        .auth-form h2 { font-size:2rem; margin-bottom:30px; color:var(--primary); text-align:center; }
        .form-group { margin-bottom:20px; }
        .form-group label { display:block; margin-bottom:8px; font-weight:600; color:var(--primary); }
        .form-control { width:100%; padding:12px 15px; border:1px solid #ddd; border-radius:5px; font-size:1rem; transition:border-color 0.3s; background-color: var(--card-bg); color: var(--text-primary); }
        .form-control:focus { outline:none; border-color:var(--secondary); }
        .btn { padding:12px 20px; border-radius:5px; font-weight:600; cursor:pointer; transition:all 0.3s; border:none; font-size:1rem; }
        .btn-primary { background-color:var(--secondary); color:white; }
        .btn-primary:hover { background-color:var(--accent); }
        .btn-outline { background-color:transparent; border:2px solid var(--secondary); color:var(--secondary); }
        .btn-outline:hover { background-color:var(--secondary); color:white; }
        .btn-sm { padding:8px 15px; font-size:0.9rem; }
        .btn-full { width:100%; }
        .auth-footer { text-align:center; margin-top:20px; }
        .auth-footer a { color:var(--secondary); text-decoration:none; font-weight:600; }
        .auth-footer a:hover { text-decoration:underline; }
        .admin-link { text-align:center; margin-top:20px; }
        .admin-link a { color:var(--primary); text-decoration:none; font-size:0.9rem; }
        .admin-link a:hover { text-decoration:underline; }

        /* Header */
        header { background-color:var(--card-bg); box-shadow:0 2px 10px var(--shadow); position:sticky; top:0; z-index:100; }
        .navbar { display:flex; justify-content:space-between; align-items:center; padding:15px 0; }
        .logo { display:flex; align-items:center; gap:10px; }
        .logo img { height:40px; }
        .logo h1 { color:var(--primary); font-size:24px; font-weight:700; }
        .nav-links { display:flex; gap:25px; }
        .nav-links a { text-decoration:none; color:var(--primary); font-weight:500; transition:color 0.3s; }
        .nav-links a:hover { color:var(--secondary); }
        .user-profile { display:flex; align-items:center; gap:15px; }
        .user-avatar { width:40px; height:40px; border-radius:50%; background-color:var(--accent); display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; text-transform:uppercase; }
        .mobile-menu-btn { display:none; background:none; border:none; font-size:24px; color:var(--primary); cursor:pointer; }

        /* Dashboard */
        .dashboard {
  display: flex;
  flex: 1; /* make it take all available space, pushing footer down */
  min-height: calc(100vh - 70px); /* keeps space for sticky header */
}
        .sidebar { width:250px; background: linear-gradient(to bottom, var(--primary), var(--secondary)); color:white; padding:30px 0; }
        .sidebar-menu { list-style:none; }
        .sidebar-menu li { margin-bottom:5px; }
        .sidebar-menu a { display:flex; align-items:center; padding:12px 20px; color:white; text-decoration:none; transition:background-color 0.3s; }
        .sidebar-menu a:hover, .sidebar-menu a.active { background-color:rgba(255,255,255,0.1); }
        .sidebar-menu i { margin-right:10px; width:20px; text-align:center; }
        .main-content { flex:1; padding:30px; background-color:var(--background); }
        .welcome-banner { background:linear-gradient(135deg, var(--secondary), var(--accent)); color:white; padding:30px; border-radius:10px; margin-bottom:30px; display:flex; justify-content:space-between; align-items:center; position:relative; overflow:hidden; }
        .welcome-banner::before { content:''; position:absolute; top:0; right:0; width:150px; height:100%; background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="0" y="50" font-family="Arial" font-size="10" fill="rgba(255,255,255,0.1)">üöÄüìàüíº</text></svg>') repeat; opacity:0.1; }
        .welcome-text h2 { font-size:1.8rem; margin-bottom:10px; }
        .points-badge { background-color:white; color:var(--secondary); padding:10px 20px; border-radius:50px; font-weight:bold; display:flex; align-items:center; }
        .points-badge i { margin-right:8px; }
        .card { background-color:var(--card-bg); border-radius:10px; padding:25px; margin-bottom:30px; box-shadow:0 5px 15px var(--shadow); }
        .card-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
        .card-header h3 { color:var(--primary); }
        .experience-form .form-group { margin-bottom:15px; }
        .anonymous-toggle { display:flex; align-items:center; margin-bottom:20px; }
        .toggle-switch { position:relative; display:inline-block; width:50px; height:24px; margin-right:10px; }
        .toggle-switch input { opacity:0; width:0; height:0; }
        .slider { position:absolute; cursor:pointer; inset:0; background-color:#ccc; transition:.4s; border-radius:24px; }
        .slider:before { position:absolute; content:""; height:16px; width:16px; left:4px; bottom:4px; background-color:white; transition:.4s; border-radius:50%; }
        input:checked + .slider { background-color:var(--secondary); }
        input:checked + .slider:before { transform:translateX(26px); }
        .experience-list { display:grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap:20px; }
        .experience-item { background-color:var(--card-bg); border-radius:10px; padding:20px; box-shadow:0 5px 15px var(--shadow); transition:transform 0.3s; }
        .experience-item:hover { transform:translateY(-5px); }
        .experience-header { display:flex; justify-content:space-between; margin-bottom:15px; }
        .company-info { display:flex; align-items:center; gap:10px; }
        .company-logo { width:40px; height:40px; background-color:var(--accent); border-radius:50%; display:flex; justify-content:center; align-items:center; color:white; font-weight:bold; }
        .job-type { background-color:var(--secondary); color:white; padding:3px 10px; border-radius:20px; font-size:0.8rem; }
        .experience-item h4 { color:var(--primary); margin-bottom:10px; }
        .experience-item p { color:var(--text-primary); font-size:0.9rem; margin-bottom:10px; opacity: 0.9; }
        .experience-meta { display:flex; justify-content:space-between; margin-top:15px; font-size:0.8rem; color:#888; }
        .actions { display:flex; gap:10px; margin-top:10px; }
        .file-links { margin-top:8px; font-size:0.9rem; }
        .file-links a { display:inline-block; margin-right:8px; text-decoration:none; color: var(--secondary); }

        .rewards-container { display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:20px; margin-top:20px; }
        .reward-item { background-color:var(--card-bg); border-radius:10px; padding:20px; text-align:center; box-shadow:0 5px 15px var(--shadow); transition:transform 0.3s; }
        .reward-item:hover { transform:translateY(-5px); }
        .reward-item i { font-size:2rem; color:var(--secondary); margin-bottom:10px; }
        .reward-points { font-weight:bold; color:var(--secondary); margin:10px 0; }
        /* Improved Sidebar Styles */
.sidebar {
  width: 250px;
  background: linear-gradient(to bottom, var(--primary), var(--secondary));
  color: white;
  padding: 30px 0;
  position: fixed;
  height: calc(100vh - 70px);
  overflow-y: auto;
  z-index: 99;
  transition: all 0.3s ease;
}

.sidebar-menu {
  list-style: none;
  padding: 0 15px;
}

.sidebar-menu li {
  margin-bottom: 5px;
}

.sidebar-menu a {
  display: flex;
  align-items: center;
  padding: 12px 15px;
  color: white;
  text-decoration: none;
  transition: all 0.3s;
  border-radius: 8px;
}

.sidebar-menu a:hover, .sidebar-menu a.active {
  background-color: rgba(255, 255, 255, 0.15);
  transform: translateX(5px);
}

.sidebar-menu i {
  margin-right: 10px;
  width: 20px;
  text-align: center;
  font-size: 1.1rem;
}

/* Adjust main content for fixed sidebar */
.main-content {
  flex: 1;
  padding: 30px;
  background-color: var(--background);
  margin-left: 250px;
  padding-bottom: 80px; /* extra space before footer */
}


        /* Settings Styles */
        .settings-header { margin-bottom:30px; }
        .settings-header h2 { font-size:1.8rem; color:var(--primary); margin-bottom:10px; }
        .settings-header p { color:var(--text-primary); opacity: 0.8; }
        .settings-divider { height:1px; background-color:#ddd; margin:25px 0; }
        .settings-section { margin-bottom:40px; }
        .settings-section h3 { font-size:1.4rem; color:var(--primary); margin-bottom:20px; }
        .settings-item { display:flex; justify-content:space-between; align-items:center; padding:15px 0; border-bottom:1px solid #eee; }
        .settings-item:last-child { border-bottom:none; }
        .settings-info { flex:1; }
        .settings-info h4 { font-size:1rem; color:var(--primary); margin-bottom:5px; }
        .settings-info p { font-size:0.9rem; color:var(--text-primary); opacity: 0.8; }
        .select-container { position:relative; width:200px; }
        .select-container select { width:100%; padding:8px 15px; border:1px solid #ddd; border-radius:5px; background-color:var(--card-bg); color: var(--text-primary); appearance:none; font-size:0.9rem; }
        .select-container::after { content:"\f078"; font-family:"Font Awesome 5 Free"; font-weight:900; position:absolute; right:10px; top:50%; transform:translateY(-50%); color:#777; pointer-events:none; }
        .app-info { padding:15px 0; }
        .app-info p { margin-bottom:10px; color:var(--text-primary); opacity: 0.8; }
        .app-version { font-weight:600; color:var(--secondary) !important; }

        /* New Sections Styles */
        /* Let's Connect Section */
        .top-contributors { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .contributor-card { background: var(--card-bg); border-radius: 10px; padding: 20px; text-align: center; box-shadow: 0 5px 15px var(--shadow); transition: transform 0.3s; }
        .contributor-card:hover { transform: translateY(-5px); }
        .contributor-avatar { width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 15px; background: linear-gradient(45deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; font-weight: bold; }
        .contributor-name { font-weight: bold; margin-bottom: 5px; }
        .contributor-role { color: var(--secondary); margin-bottom: 15px; font-size: 0.9rem; }
        .contributor-stats { display: flex; justify-content: space-around; margin: 15px 0; }
        .stat { text-align: center; }
        .stat-value { font-weight: bold; color: var(--secondary); }
        .stat-label { font-size: 0.8rem; color: var(--text-primary); opacity: 0.8; }
        .contributor-actions { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
       
        /* Profile Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; }
        .modal-content { background: var(--card-bg); border-radius: 10px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; padding: 30px; position: relative; }
        .close-modal { position: absolute; top: 15px; right: 15px; font-size: 1.5rem; cursor: pointer; color: var(--text-primary); }
        .profile-header { display: flex; gap: 30px; margin-bottom: 30px; }
        .profile-avatar { width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(45deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; font-weight: bold; flex-shrink: 0; }
        .profile-info { flex: 1; }
        .profile-name { font-size: 1.8rem; margin-bottom: 5px; }
        .profile-title { color: var(--secondary); margin-bottom: 15px; }
        .profile-stats { display: flex; gap: 20px; margin-bottom: 20px; }
        .profile-section { margin-bottom: 30px; }
        .profile-section h3 { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .experience-timeline { position: relative; padding-left: 20px; }
        .experience-timeline::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: var(--accent); }
        .timeline-item { position: relative; margin-bottom: 20px; }
        .timeline-item::before { content: ''; position: absolute; left: -24px; top: 5px; width: 10px; height: 10px; border-radius: 50%; background: var(--secondary); }
        .timeline-date { font-size: 0.9rem; color: var(--text-primary); opacity: 0.8; margin-bottom: 5px; }
       
        /* My Journey Section */
        .companies-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; margin: 20px 0; }
        .company-card { background: var(--card-bg); border-radius: 10px; padding: 20px; text-align: center; box-shadow: 0 5px 15px var(--shadow); transition: all 0.3s; cursor: pointer; }
        .company-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px var(--shadow); }
        .company-logo-large { width: 80px; height: 80px; margin: 0 auto 15px; background: var(--accent); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: white; }
        .company-name { font-weight: bold; margin-bottom: 5px; }
       
        .roadmap-container { margin: 40px 0; }
        .roadmap-header { text-align: center; margin-bottom: 30px; }
        .roadmap { display: flex; justify-content: space-between; position: relative; margin: 50px 0; }
        .roadmap::before { content: ''; position: absolute; top: 50px; left: 0; right: 0; height: 8px; background: linear-gradient(to right, var(--primary), var(--secondary), var(--accent)); border-radius: 4px; }
        .roadmap-phase { position: relative; width: 30%; text-align: center; }
        .phase-icon { width: 60px; height: 60px; border-radius: 50%; background: var(--card-bg); box-shadow: 0 5px 15px var(--shadow); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--secondary); position: relative; z-index: 2; }
        .phase-title { font-weight: bold; margin-bottom: 10px; }
        .phase-description { font-size: 0.9rem; color: var(--text-primary); opacity: 0.8; }
       
        .questions-section { margin: 40px 0; }
        .questions-tabs { display: flex; border-bottom: 1px solid #ddd; margin-bottom: 20px; }
        .tab-button { padding: 10px 20px; cursor: pointer; border: none; background: none; font-weight: 500; color: var(--text-primary); }
        .tab-button.active { border-bottom: 3px solid var(--secondary); color: var(--secondary); }
        .questions-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .question-item { background: var(--card-bg); padding: 15px; border-radius: 8px; box-shadow: 0 3px 10px var(--shadow); }
       
        /* Trending Courses */
        .courses-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .course-card { background: var(--card-bg); border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px var(--shadow); transition: transform 0.3s; }
        .course-card:hover { transform: translateY(-5px); }
        .course-image { height: 160px; background: linear-gradient(45deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; }
        .course-content { padding: 20px; }
        .course-title { font-weight: bold; margin-bottom: 10px; }
        .course-description { color: var(--text-primary); opacity: 0.8; margin-bottom: 15px; font-size: 0.9rem; }
        .course-meta { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .course-price { font-weight: bold; color: var(--secondary); }
        .course-rating { color: var(--accent); }
       
        /* Graffiti Banner */
        .graffiti-banner { background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent)); padding: 40px; border-radius: 10px; margin: 40px 0; position: relative; overflow: hidden; text-align: center; color: white; }
        .graffiti-banner h2 { font-size: 2rem; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .graffiti-banner p { font-size: 1.1rem; max-width: 600px; margin: 0 auto; }
        .graffiti-banner::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="0" y="20" font-family="Arial" font-size="10" fill="rgba(255,255,255,0.1)">üíºüìàüöÄ</text><text x="0" y="50" font-family="Arial" font-size="10" fill="rgba(255,255,255,0.1)">üëîüíªüéì</text><text x="0" y="80" font-family="Arial" font-size="10" fill="rgba(255,255,255,0.1)">üèÜüìöüîç</text></svg>') repeat; }

        /* Animation */
        @keyframes fadeIn { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }
        .fade-in{ animation:fadeIn 0.8s ease-out forwards; }
        .delay-1{ animation-delay:0.2s; } .delay-2{ animation-delay:0.4s; } .delay-3{ animation-delay:0.6s; }

        /* page switching */
        .hidden{ display:none; }
        .section{ display:none; }
        .section.active{ display:block; }

        /* NEW: Notification Styles */
        .notifications-container { max-height: 600px; overflow-y: auto; }
        .notification-item { padding: 15px; border-bottom: 1px solid #eee; display: flex; align-items: flex-start; transition: all 0.3s; }
        .notification-item.unread { background-color: var(--notification-unread); }
        .notification-item:hover { background-color: var(--notification-hover); }
        .notification-icon { width: 40px; height: 40px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; color: white; margin-right: 15px; flex-shrink: 0; }
        .notification-content { flex: 1; }
        .notification-title { font-weight: 600; margin-bottom: 5px; }
        .notification-message { color: var(--text-primary); opacity: 0.8; margin-bottom: 5px; }
        .notification-time { font-size: 0.8rem; color: var(--text-primary); opacity: 0.7; }
        .notification-actions { display: flex; gap: 10px; margin-top: 10px; }
        .notification-badge { background-color: var(--secondary); color: white; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; margin-left: 10px; }
        
       /* Job Finder Redesign Styles */
.job-finder-container {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 20px;
}

.job-filters {
  background: var(--card-bg);
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 5px 15px var(--shadow);
  height: fit-content;
  position: sticky;
  top: 90px;
}

.filters-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.filters-header h4 {
  margin: 0;
  color: var(--primary);
}

.filter-group {
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid #eee;
}

.filter-group:last-child {
  border-bottom: none;
}

.filter-group h4 {
  margin-bottom: 10px;
  color: var(--primary);
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.95rem;
}

.filter-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.filter-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
}

.filter-checkbox input {
  margin: 0;
}

.job-listings-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.job-listings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.job-listings-header h4 {
  color: var(--primary);
  margin: 0;
}

.job-count {
  color: var(--secondary);
  font-weight: normal;
}

.sort-options {
  width: 200px;
}

.job-listings {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.job-card {
  background: var(--card-bg);
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 5px 15px var(--shadow);
  transition: all 0.3s;
  position: relative;
}

.job-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px var(--shadow);
}

.job-card.featured {
  border-left: 4px solid var(--secondary);
}

.job-badge {
  position: absolute;
  top: 15px;
  right: 15px;
  background: var(--secondary);
  color: white;
  padding: 3px 10px;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: bold;
}

.job-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 15px;
}

.job-company {
  display: flex;
  align-items: center;
  gap: 10px;
}

.job-company-logo {
  width: 50px;
  height: 50px;
  border-radius: 8px;
  background: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 1.2rem;
}

.job-title {
  font-weight: bold;
  font-size: 1.1rem;
  color: var(--primary);
}

.job-company-name {
  color: var(--secondary);
  font-size: 0.9rem;
}

.save-job {
  align-self: flex-start;
}

.job-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 15px;
}

.job-tag {
  background: rgba(126, 200, 227, 0.2);
  color: var(--accent);
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.8rem;
}

.job-description {
  color: var(--text-primary);
  opacity: 0.8;
  margin-bottom: 15px;
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.job-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.job-meta {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.job-salary {
  font-weight: bold;
  color: var(--secondary);
}

.job-location {
  font-size: 0.9rem;
  color: var(--text-primary);
  opacity: 0.8;
  display: flex;
  align-items: center;
  gap: 5px;
}

.job-posted {
  font-size: 0.9rem;
  color: var(--text-primary);
  opacity: 0.7;
}

.job-actions {
  display: flex;
  gap: 10px;
}

.load-more {
  margin-top: 20px;
}

.header-actions {
  display: flex;
  gap: 10px;
}

/* Responsive styles for job finder */
@media (max-width: 992px) {
  .job-finder-container {
    grid-template-columns: 1fr;
  }
  
  .job-filters {
    position: static;
    margin-bottom: 20px;
  }
  
  .job-listings-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .sort-options {
    width: 100%;
  }
}

@media (max-width: 576px) {
  .job-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .job-actions {
    flex-direction: column;
    width: 100%;
  }
  
  .job-actions button {
    width: 100%;
  }
  
  .job-card {
    padding: 15px;
  }
}

        /* NEW: Enhanced Notification Styles */
        .notification-filters { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .notification-filter-btn { padding: 8px 15px; border-radius: 20px; border: 1px solid var(--secondary); background: transparent; color: var(--secondary); cursor: pointer; transition: all 0.3s; }
        .notification-filter-btn.active { background: var(--secondary); color: white; }
        .notification-priority { position: absolute; right: 15px; top: 15px; font-size: 0.8rem; padding: 3px 8px; border-radius: 4px; }
        .notification-priority.high { background: var(--danger); color: white; }
        .notification-priority.medium { background: var(--warning); color: white; }
        .notification-group-header { margin: 20px 0 10px; padding-bottom: 5px; border-bottom: 1px solid #eee; color: var(--primary); font-weight: 600; }
        
        /* NEW: Comment Thread Styles */
        .comment { margin: 15px 0; padding: 15px; border-radius: 8px; background: var(--card-bg); box-shadow: 0 2px 5px var(--shadow); }
        .comment-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .comment-user { display: flex; align-items: center; gap: 10px; }
        .comment-avatar { width: 30px; height: 30px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: bold; }
        .comment-content { margin-left: 40px; }
        .comment-actions { display: flex; gap: 15px; margin-top: 10px; }
        .comment-action { background: none; border: none; color: var(--secondary); cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; }
        .replies { margin-left: 30px; border-left: 2px solid var(--accent); padding-left: 15px; }
        .comment-form { margin-top: 15px; }
        
        /* NEW: Experience Filter Styles */
        .filter-container { background: var(--card-bg); padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 3px 10px var(--shadow); }
        .filter-row { display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
        .filter-group { flex: 1; min-width: 200px; }
        .filter-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary); }
        .filter-group select, .filter-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background: var(--card-bg); color: var(--text-primary); }
        .filter-actions { display: flex; justify-content: flex-end; gap: 10px; }
        
        /* NEW: Messaging Styles */
        .messaging-container { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; }
        .conversations-list { background: var(--card-bg); border-radius: 10px; padding: 20px; box-shadow: 0 3px 10px var(--shadow); max-height: 600px; overflow-y: auto; }
        .conversation-item { padding: 15px; border-bottom: 1px solid #eee; cursor: pointer; transition: all 0.3s; }
        .conversation-item:hover { background: var(--notification-hover); }
        .conversation-item.active { background: var(--notification-unread); }
        .conversation-header { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .conversation-user { font-weight: 600; }
        .conversation-time { font-size: 0.8rem; color: var(--text-primary); opacity: 0.7; }
        .conversation-preview { font-size: 0.9rem; color: var(--text-primary); opacity: 0.8; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .chat-container { background: var(--card-bg); border-radius: 10px; padding: 20px; box-shadow: 0 3px 10px var(--shadow); display: flex; flex-direction: column; }
        .chat-header { padding-bottom: 15px; border-bottom: 1px solid #eee; margin-bottom: 15px; }
        .chat-messages { flex: 1; overflow-y: auto; max-height: 400px; margin-bottom: 15px; }
        .message { margin-bottom: 15px; }
        .message.sent { text-align: right; }
        .message-content { display: inline-block; padding: 10px 15px; border-radius: 18px; max-width: 70%; }
        .message.received .message-content { background: var(--notification-unread); text-align: left; }
        .message.sent .message-content { background: var(--secondary); color: white; }
        .message-time { font-size: 0.7rem; margin-top: 5px; color: var(--text-primary); opacity: 0.7; }
        .chat-input { display: flex; gap: 10px; }
        .chat-input input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 20px; background: var(--card-bg); color: var(--text-primary); }
        .chat-input button { padding: 12px 20px; border-radius: 20px; }

        /* Responsive */
        @media (max-width: 1200px) {
            .messaging-container { grid-template-columns: 1fr; }
            .conversations-list { max-height: 200px; }
        }
        
        @media (max-width: 992px) {
            .auth-container { flex-direction:column; }
            .auth-left, .auth-right { padding:30px 20px; }
            .auth-left { text-align:center; }
            .auth-left p { margin:0 auto 20px; }
            .dashboard { flex-direction:column; }
            .sidebar { width:100%; padding:15px 0; }
            .sidebar-menu { display:flex; overflow-x:auto; padding:0 15px; }
            .sidebar-menu li { margin-bottom:0; margin-right:10px; white-space:nowrap; }
            .sidebar-menu a { padding:10px 15px; }
            .settings-item { flex-direction:column; align-items:flex-start; }
            .toggle-switch, .select-container { margin-top:10px; }
            .profile-header { flex-direction: column; text-align: center; }
            .profile-stats { justify-content: center; }
            .roadmap { flex-direction: column; }
            .roadmap-phase { width: 100%; margin-bottom: 40px; }
            .roadmap::before { width: 8px; height: 100%; left: 50px; top: 0; }
            .job-finder-container { grid-template-columns: 1fr; }
            .filter-row { flex-direction: column; }
            .filter-group { min-width: 100%; }
        }
        @media (max-width:768px){
            .nav-links{ display:none; position:absolute; top:70px; left:0; right:0; background:var(--card-bg); flex-direction:column; padding:20px; box-shadow:0 5px 10px var(--shadow); }
            .nav-links.active{ display:flex; }
            .mobile-menu-btn{ display:block; }
            .welcome-banner{ flex-direction:column; text-align:center; }
            .points-badge{ margin-top:15px; }
            .notification-filters { flex-direction: column; }
            .notification-filter-btn { width: 100%; text-align: center; }
        }
        @media (max-width:576px){
            .experience-list, .rewards-container, .top-contributors, .courses-container { grid-template-columns:1fr; }
            .select-container { width:100%; }
            .contributor-actions { flex-direction: column; }
            .notification-item { flex-direction: column; }
            .notification-icon { margin-bottom: 10px; }
            .message-content { max-width: 85%; }
            .footer-section { min-width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle Button - MOVED OUTSIDE OF PAGE CONTAINERS -->
    <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Login Page -->
    <div id="loginPage" class="auth-container">
        <div class="auth-left">
            <div class="auth-left-content">
                <h1>Welcome to XShare</h1>
                <p>From Campus to Career - Share interview experiences, ask questions, and learn from peers to prepare smarter for your career journey.</p>
                <p>Don't have an account? <a href="#" id="showSignup" style="color: white; font-weight: 600;">Sign up now</a></p>
            </div>
        </div>
        <div class="auth-right">
            <div class="auth-form">
                <h2>Login</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Login</button>
                </form>
                <div class="auth-footer">
                    <p>Forgot your password? <a href="#" id="resetPasswordLink">Reset it here</a></p>
                </div>
                <div class="admin-link">
                    <a href="#" id="showAdminLogin">Admin Login</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Page -->
    <div id="signupPage" class="auth-container hidden">
        <div class="auth-left">
            <div class="auth-left-content">
                <h1>Join XShare</h1>
                <p>Create your account to start sharing experiences, asking questions, and earning rewards for your contributions.</p>
                <p>Already have an account? <a href="#" id="showLogin" style="color: white; font-weight: 600;">Login here</a></p>
            </div>
        </div>
        <div class="auth-right">
            <div class="auth-form">
                <h2>Sign Up</h2>
                <form id="signupForm">
                    <div class="form-group">
                        <label for="signupName">Full Name</label>
                        <input type="text" id="signupName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="signupConfirmPassword">Confirm Password</label>
                        <input type="password" id="signupConfirmPassword" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="signupBatch">Batch Year</label>
                        <select id="signupBatch" class="form-control" required>
                            <option value="">Select your batch year</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Create Account</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Login Page -->
    <div id="adminLoginPage" class="auth-container hidden">
        <div class="auth-left">
            <div class="auth-left-content">
                <h1>Admin Portal</h1>
                <p>Access the administrative dashboard to manage content, verify submissions, and support students.</p>
                <p>Regular user? <a href="#" id="showLoginFromAdmin" style="color: white; font-weight: 600;">Login here</a></p>
            </div>
        </div>
        <div class="auth-right">
            <div class="auth-form">
                <h2>Admin Login</h2>
                <form id="adminLoginForm">
                    <div class="form-group">
                        <label for="adminEmail">Admin Email</label>
                        <input type="email" id="adminEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="adminPassword">Password</label>
                        <input type="password" id="adminPassword" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" onclick="window.location.href='admin.html';">Login</button>

                </form>
            </div>
        </div>
    </div>

    <!-- Main App (shown after login) -->
    <div id="appContainer" class="hidden">
        <!-- Header -->
        <header>
            <div class="container">
                <nav class="navbar">
                    <div class="logo">
                        <!-- Replace with your actual logo image -->
                        <img src="XShare_LOGO.png" alt="XShare Logo">
                        
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-avatar" id="userAvatar">U</div>
                        <span id="userNameTop">User</span>
                        <div id="notificationBell" class="notification-icon" style="width: 35px; height: 35px; cursor: pointer;">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notificationCount" style="display: none;">0</span>
                        </div>
                        <button class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Dashboard -->
        <div class="dashboard">
            <!-- Sidebar -->
            <div class="sidebar">
                <ul class="sidebar-menu">
                    <li><a href="#" class="nav-link active" data-section="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="#" class="nav-link" data-section="share-experience"><i class="fas fa-share-alt"></i> Share Experience</a></li>
                    <li><a href="#" class="nav-link" data-section="my-experiences"><i class="fas fa-history"></i> My Experiences</a></li>
                    <li><a href="#" class="nav-link" data-section="my-questions"><i class="fas fa-question-circle"></i> My Questions</a></li>
                    <li><a href="#" class="nav-link" data-section="lets-connect"><i class="fas fa-handshake"></i> Let's Connect</a></li>
                    <li><a href="#" class="nav-link" data-section="my-journey"><i class="fas fa-road"></i> My Journey</a></li>
                    <li><a href="#" class="nav-link" data-section="job-finder"><i class="fas fa-briefcase"></i> Job Finder</a></li>
                    <li><a href="#" class="nav-link" data-section="bookmarks"><i class="fas fa-bookmark"></i> Bookmarks</a></li>
                    <li><a href="#" class="nav-link" data-section="notifications"><i class="fas fa-bell"></i> Notifications</a></li>
                    <li><a href="#" class="nav-link" data-section="settings"><i class="fas fa-cog"></i> Settings</a></li>
                    <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Dashboard Section -->
                <div id="dashboard-section" class="section active">
                    <div class="welcome-banner">
                        <div class="welcome-text">
                            <h2>Welcome back, <span id="userName">User</span>!</h2>
                            <p>Ready to continue your career preparation journey?</p>
                        </div>
                        <div class="points-badge">
                            <i class="fas fa-star"></i>
                            <span>245 Points</span>
                        </div>
                    </div>

                    <div class="graffiti-banner">
                        <h2>Your Career Journey Starts Here</h2>
                        <p>From rejection to selection - every experience brings you closer to your dream job!</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Trending Courses</h3>
                            <button class="btn btn-primary btn-sm">View All</button>
                        </div>
                        <div class="courses-container">
                            <div class="course-card">
                                <div class="course-image">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="course-content">
                                    <h3 class="course-title">Generative AI</h3>
                                    <p class="course-description">Master the fundamentals of generative AI models and applications.</p>
                                    <div class="course-meta">
                                        <span class="course-price">$79.99</span>
                                        <span class="course-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                    </div>
                                    <button class="btn btn-primary btn-full">Enroll Now</button>
                                </div>
                            </div>
                            <div class="course-card">
                                <div class="course-image">
                                    <i class="fas fa-project-diagram"></i>
                                </div>
                                <div class="course-content">
                                    <h3 class="course-title">Data Structures & Algorithms</h3>
                                    <p class="course-description">Comprehensive guide to mastering DSA for coding interviews.</p>
                                    <div class="course-meta">
                                        <span class="course-price">$69.99</span>
                                        <span class="course-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                                    </div>
                                    <button class="btn btn-primary btn-full">Enroll Now</button>
                                </div>
                            </div>
                            <div class="course-card">
                                <div class="course-image">
                                    <i class="fas fa-comment-dots"></i>
                                </div>
                                <div class="course-content">
                                    <h3 class="course-title">Prompt Engineering</h3>
                                    <p class="course-description">Learn to craft effective prompts for AI systems.</p>
                                    <div class="course-meta">
                                        <span class="course-price">$59.99</span>
                                        <span class="course-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                    </div>
                                    <button class="btn btn-primary btn-full">Enroll Now</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Recent Experiences</h3>
                            <button class="btn btn-primary btn-sm">View All</button>
                        </div>
                        <div class="experience-list">
                            <div class="experience-item">
                                <div class="experience-header">
                                    <div class="company-info">
                                        <div class="company-logo">G</div>
                                        <div>
                                            <h4>Google</h4>
                                            <div class="job-type">Software Engineer</div>
                                        </div>
                                    </div>
                                </div>
                                <p>The interview process was challenging but fair. Focus on data structures and algorithms.</p>
                                <div class="experience-meta">
                                    <span><i class="far fa-thumbs-up"></i> 24</span>
                                    <span>2 days ago</span>
                                </div>
                            </div>
                            <div class="experience-item">
                                <div class="experience-header">
                                    <div class="company-info">
                                        <div class="company-logo">A</div>
                                        <div>
                                            <h4>Amazon</h4>
                                            <div class="job-type">Product Manager</div>
                                        </div>
                                    </div>
                                </div>
                                <p>Behavioral questions were key. They really value leadership principles.</p>
                                <div class="experience-meta">
                                    <span><i class="far fa-thumbs-up"></i> 18</span>
                                    <span>5 days ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                    <!-- Rewards -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Your Rewards</h3>
                            <button class="btn btn-outline btn-sm">Redeem History</button>
                        </div>
                        <p>Earn points by sharing experiences and answering questions. Redeem them for exciting rewards!</p>
                        <div class="rewards-container">
                            <div class="reward-item">
                                <i class="fas fa-wine-bottle"></i>
                                <div class="reward-points">500 points</div>
                                <p>Water Bottle & Stickers</p>
                                <button class="btn btn-primary btn-sm" style="margin-top: 10px;">Redeem</button>
                            </div>
                            <div class="reward-item">
                                <i class="fas fa-headphones"></i>
                                <div class="reward-points">1,000 points</div>
                                <p>Premium Headphones</p>
                                <button class="btn btn-outline btn-sm" style="margin-top: 10px;">Coming Soon</button>
                            </div>
                            <div class="reward-item">
                                <i class="fas fa-briefcase"></i>
                                <div class="reward-points">2,000 points</div>
                                <p>Premium Bags</p>
                                <button class="btn btn-outline btn-sm" style="margin-top: 10px;">Coming Soon</button>
                            </div>
                            <div class="reward-item">
                                <i class="fas fa-backpack"></i>
                                <div class="reward-points">5,000 points</div>
                                <p>High-quality Backpack</p>
                                <button class="btn btn-outline btn-sm" style="margin-top: 10px;">Coming Soon</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Share Experience Section (All Shared) -->
                <div id="share-experience-section" class="section">
                    <div class="filter-container">
                        <h3>Filter Experiences</h3>
                        <div class="filter-row">
                            <div class="filter-group">
                                <label for="filterCompany">Company</label>
                                <input type="text" id="filterCompany" class="form-control" placeholder="Search by company">
                            </div>
                            <div class="filter-group">
                                <label for="filterRole">Job Role</label>
                                <input type="text" id="filterRole" class="form-control" placeholder="Search by role">
                            </div>
                        </div>
                        <div class="filter-row">
                            <div class="filter-group">
                                <label for="filterType">Job Type</label>
                                <select id="filterType" class="form-control">
                                    <option value="">All Types</option>
                                    <option value="Internship">Internship</option>
                                    <option value="Full-time">Full-time</option>
                                    <option value="Part-time">Part-time</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="filterExperience">Experience Level</label>
                                <select id="filterExperience" class="form-control">
                                    <option value="">All Levels</option>
                                    <option value="Internship">Internship</option>
                                    <option value="Fresher">Fresher/Student</option>
                                    <option value="Entry">Entry Level (0-1 year)</option>
                                    <option value="Junior">Junior (1-3 years)</option>
                                    <option value="Mid">Mid Level (3-5 years)</option>
                                    <option value="Senior">Senior (5+ years)</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter-actions">
                            <button class="btn btn-outline" id="resetFilters">Reset</button>
                            <button class="btn btn-primary" id="applyFilters">Apply Filters</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>All Shared Experiences</h3>
                        </div>
                        <div class="experience-list" id="shared-experiences-list"></div>
                    </div>
                </div>

                <!-- My Experiences Section -->
                <div id="my-experiences-section" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3>Share Your Experience</h3>
                        </div>
                        <form class="experience-form" id="experienceForm">
                            <div class="anonymous-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="anonymousToggle">
                                    <span class="slider"></span>
                                </label>
                                <span>Post anonymously</span>
                            </div>
                            <div class="form-group">
                                <label for="companyName">Company Name</label>
                                <input type="text" id="companyName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="jobRole">Job Role</label>
                                <input type="text" id="jobRole" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="jobType">Job Type</label>
                                <select id="jobType" class="form-control" required>
                                    <option value="">Select job type</option>
                                    <option value="Internship">Internship</option>
                                    <option value="Full-time">Full-time</option>
                                    <option value="Part-time">Part-time</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="experienceLevel">Experience Level</label>
                                <select id="experienceLevel" class="form-control" required>
                                    <option value="">Select experience level</option>
                                    <option value="Internship">Internship</option>
                                    <option value="Fresher">Fresher/Student</option>
                                    <option value="Entry">Entry Level (0-1 year)</option>
                                    <option value="Junior">Junior (1-3 years)</option>
                                    <option value="Mid">Mid Level (3-5 years)</option>
                                    <option value="Senior">Senior (5+ years)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="experienceDetails">Experience Details</label>
                                <textarea id="experienceDetails" class="form-control" rows="5" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="preparationTips">Preparation Tips</label>
                                <textarea id="preparationTips" class="form-control" rows="3"></textarea>
                            </div>
                            <!-- Added file upload (PDF/JPG/JPEG) for Preparation Tips -->
                            <div class="form-group">
                                <label for="tipsFiles">Attach files (PDF, JPG, JPEG)</label>
                                <input type="file" id="tipsFiles" class="form-control" accept=".pdf,.jpg,.jpeg" multiple>
                            </div>
                            <button type="submit" class="btn btn-primary btn-full">Submit Experience</button>
                        </form>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>My Experiences</h3>
                        </div>
                        <div class="experience-list" id="my-experiences-list"></div>
                    </div>
                </div>

                <!-- My Questions Section -->
                <div id="my-questions-section" class="section">
                    <div class="card">
                        <div class="card-header"><h3>Ask a Question</h3></div>
                        <form id="questionForm" class="experience-form">
                            <div class="form-group">
                                <label for="questionTitle">Question Title</label>
                                <input type="text" id="questionTitle" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="questionContent">Details</label>
                                <textarea id="questionContent" class="form-control" rows="4" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="questionTags">Tags (comma separated)</label>
                                <input type="text" id="questionTags" class="form-control">
                            </div>
                            <button type="submit" class="btn btn-primary btn-full">Post Question</button>
                        </form>
                    </div>

                    <div class="card">
                        <div class="card-header"><h3>My Questions</h3></div>
                        <div id="my-questions-list"></div>
                    </div>

                    <!-- All Questions -->
                    <div class="card">
                        <div class="card-header"><h3>All Questions</h3></div>
                        <div id="all-questions-list"></div>
                    </div>
                </div>

                <!-- Let's Connect Section -->
                <div id="lets-connect-section" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3>Let's Connect</h3>
                        </div>
                        <p>Connect with peers, alumni, and industry professionals to expand your network and career opportunities.</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Our Top Contributors</h3>
                        </div>
                        <div class="top-contributors" id="top-contributors-list">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Messaging</h3>
                        </div>
                        <div class="messaging-container">
                            <div class="conversations-list" id="conversations-list">
                                <!-- Conversations will be populated here -->
                            </div>
                            <div class="chat-container">
                                <div class="chat-header" id="chat-header">
                                    <h4>Select a conversation to start messaging</h4>
                                </div>
                                <div class="chat-messages" id="chat-messages">
                                    <!-- Messages will be displayed here -->
                                </div>
                                <div class="chat-input">
                                    <input type="text" id="message-input" placeholder="Type your message..." disabled>
                                    <button class="btn btn-primary" id="send-message" disabled>Send</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Pending Connection Requests</h3>
                        </div>
                        <div id="pending-requests-list">
                            <p>You have no pending connection requests.</p>
                        </div>
                    </div>
                </div>

                <!-- My Journey Section -->
                <div id="my-journey-section" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3>My Journey</h3>
                        </div>
                        <p>Select a company to explore interview roadmaps, connect with current employees, and access preparation resources.</p>
                       
                        <div class="companies-grid">
                            <div class="company-card" data-company="google">
                                <div class="company-logo-large">G</div>
                                <div class="company-name">Google</div>
                            </div>
                            <div class="company-card" data-company="microsoft">
                                <div class="company-logo-large">M</div>
                                <div class="company-name">Microsoft</div>
                            </div>
                            <div class="company-card" data-company="amazon">
                                <div class="company-logo-large">A</div>
                                <div class="company-name">Amazon</div>
                            </div>
                            <div class="company-card" data-company="meta">
                                <div class="company-logo-large">F</div>
                                <div class="company-name">Meta</div>
                            </div>
                            <div class="company-card" data-company="apple">
                                <div class="company-logo-large">A</div>
                                <div class="company-name">Apple</div>
                            </div>
                            <div class="company-card" data-company="netflix">
                                <div class="company-logo-large">N</div>
                                <div class="company-name">Netflix</div>
                            </div>
                        </div>

                        <div class="roadmap-container hidden" id="company-roadmap">
                            <div class="roadmap-header">
                                <h3 id="roadmap-company-name">Company Interview Roadmap</h3>
                                <p>Follow this roadmap to prepare effectively for your interviews</p>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <h4>Suggested Connections at <span id="suggested-company-name">Company</span></h4>
                                </div>
                                <div class="top-contributors" id="suggested-connections">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                            </div>

                            <div class="roadmap">
                                <div class="roadmap-phase">
                                    <div class="phase-icon">1</div>
                                    <h4 class="phase-title">Aptitude Round</h4>
                                    <p class="phase-description">Quantitative, logical and verbal reasoning tests</p>
                                </div>
                                <div class="roadmap-phase">
                                    <div class="phase-icon">2</div>
                                    <h4 class="phase-title">Coding Round</h4>
                                    <p class="phase-description">Data structures and algorithms problems</p>
                                </div>
                                <div class="roadmap-phase">
                                    <div class="phase-icon">3</div>
                                    <h4 class="phase-title">Interview Preparation</h4>
                                    <p class="phase-description">Technical and HR interview practice</p>
                                </div>
                            </div>

                            <div class="questions-section">
                                <div class="questions-tabs">
                                    <button class="tab-button active" data-tab="aptitude">Aptitude Questions</button>
                                    <button class="tab-button" data-tab="coding">Coding Questions</button>
                                    <button class="tab-button" data-tab="interview">Interview Questions</button>
                                </div>
                                <div class="questions-list" id="aptitude-questions">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                                <div class="questions-list hidden" id="coding-questions">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                                <div class="questions-list hidden" id="interview-questions">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NEW: Job Finder Section -->
<div id="job-finder-section" class="section">
  <div class="card">
    <div class="card-header">
      <h3>Job Finder</h3>
      <div class="header-actions">
        <button class="btn btn-outline btn-sm" id="toggle-filters">
          <i class="fas fa-filter"></i> Filters
        </button>
        <button class="btn btn-primary btn-sm">
          <i class="fas fa-sync-alt"></i> Refresh
        </button>
      </div>
    </div>
    <p>Find your dream job from thousands of listings tailored to your skills and experience.</p>
  </div>

  <div class="job-finder-container">
    <!-- Filters Panel -->
    <div class="job-filters" id="filters-panel">
      <div class="filters-header">
        <h4>Filters</h4>
        <button class="btn btn-sm btn-outline" id="clear-filters">Clear All</button>
      </div>
      
      <div class="filter-group">
        <h4><i class="fas fa-search"></i> Keywords</h4>
        <input type="text" class="form-control" placeholder="Job title, skills, or company" id="keyword-filter">
      </div>
      
      <div class="filter-group">
        <h4><i class="fas fa-map-marker-alt"></i> Location</h4>
        <input type="text" class="form-control" placeholder="City, state, or remote" id="location-filter">
      </div>
      
      <div class="filter-group">
        <h4><i class="fas fa-briefcase"></i> Job Type</h4>
        <div class="filter-options">
          <label class="filter-checkbox">
            <input type="checkbox" checked> Full-time
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" checked> Part-time
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" checked> Internship
          </label>
          <label class="filter-checkbox">
            <input type="checkbox"> Contract
          </label>
          <label class="filter-checkbox">
            <input type="checkbox"> Freelance
          </label>
        </div>
      </div>
      
      <div class="filter-group">
        <h4><i class="fas fa-chart-line"></i> Experience Level</h4>
        <div class="filter-options">
          <label class="filter-checkbox">
            <input type="checkbox" checked> Entry Level
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" checked> Mid Level
          </label>
          <label class="filter-checkbox">
            <input type="checkbox"> Senior Level
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" checked> Student
          </label>
        </div>
      </div>
      
      <div class="filter-group">
        <h4><i class="fas fa-industry"></i> Industry</h4>
        <select class="form-control" id="industry-filter">
          <option value="">All Industries</option>
          <option value="tech">Technology</option>
          <option value="finance">Finance</option>
          <option value="healthcare">Healthcare</option>
          <option value="education">Education</option>
          <option value="marketing">Marketing</option>
        </select>
      </div>
      
      <div class="filter-group">
        <h4><i class="fas fa-dollar-sign"></i> Salary Range</h4>
        <select class="form-control" id="salary-filter">
          <option value="">Any salary</option>
          <option value="0-50">$0 - $50,000</option>
          <option value="50-100">$50,000 - $100,000</option>
          <option value="100-150">$100,000 - $150,000</option>
          <option value="150+">$150,000+</option>
        </select>
      </div>
      
      <button class="btn btn-primary btn-full" id="apply-filters">Apply Filters</button>
    </div>
    
    <!-- Job Listings -->
    <div class="job-listings-container">
      <div class="job-listings-header">
        <h4>Recommended Jobs For You <span class="job-count">(24 jobs)</span></h4>
        <div class="sort-options">
          <select class="form-control" id="sort-by">
            <option value="relevance">Sort by: Relevance</option>
            <option value="date">Sort by: Date Posted</option>
            <option value="salary">Sort by: Salary</option>
          </select>
        </div>
      </div>
      
      <div class="job-listings">
        <div class="job-card featured">
          <div class="job-badge">Featured</div>
          <div class="job-header">
            <div class="job-company">
              <div class="job-company-logo">G</div>
              <div>
                <div class="job-title">Frontend Developer</div>
                <div class="job-company-name">Google</div>
              </div>
            </div>
            <button class="btn btn-outline btn-sm save-job">
              <i class="far fa-star"></i>
            </button>
          </div>
          <div class="job-tags">
            <span class="job-tag">React</span>
            <span class="job-tag">JavaScript</span>
            <span class="job-tag">CSS</span>
            <span class="job-tag">Remote</span>
          </div>
          <div class="job-description">
            We're looking for a talented Frontend Developer to join our team. You'll work on building user interfaces for our products using modern frameworks like React and Vue.
          </div>
          <div class="job-footer">
            <div class="job-meta">
              <span class="job-salary">$120,000 - $150,000</span>
              <span class="job-location"><i class="fas fa-map-marker-alt"></i> Remote</span>
            </div>
            <div class="job-posted">Posted 2 days ago</div>
          </div>
          <div class="job-actions">
            <button class="btn btn-primary">Apply Now</button>
            <button class="btn btn-outline">View Details</button>
          </div>
        </div>
        
        <div class="job-card">
          <div class="job-header">
            <div class="job-company">
              <div class="job-company-logo">M</div>
              <div>
                <div class="job-title">Software Engineer</div>
                <div class="job-company-name">Microsoft</div>
              </div>
            </div>
            <button class="btn btn-outline btn-sm save-job">
              <i class="far fa-star"></i>
            </button>
          </div>
          <div class="job-tags">
            <span class="job-tag">C#</span>
            <span class="job-tag">.NET</span>
            <span class="job-tag">Azure</span>
            <span class="job-tag">SQL</span>
          </div>
          <div class="job-description">
            Join our engineering team to build scalable cloud solutions. Experience with Azure is a plus. We value clean code and innovative thinking.
          </div>
          <div class="job-footer">
            <div class="job-meta">
              <span class="job-salary">$110,000 - $140,000</span>
              <span class="job-location"><i class="fas fa-map-marker-alt"></i> Redmond, WA</span>
            </div>
            <div class="job-posted">Posted 5 days ago</div>
          </div>
          <div class="job-actions">
            <button class="btn btn-primary">Apply Now</button>
            <button class="btn btn-outline">View Details</button>
          </div>
        </div>
        
        <div class="job-card">
          <div class="job-header">
            <div class="job-company">
              <div class="job-company-logo">A</div>
              <div>
                <div class="job-title">Data Analyst</div>
                <div class="job-company-name">Amazon</div>
              </div>
            </div>
            <button class="btn btn-outline btn-sm save-job">
              <i class="far fa-star"></i>
            </button>
          </div>
          <div class="job-tags">
            <span class="job-tag">SQL</span>
            <span class="job-tag">Python</span>
            <span class="job-tag">Tableau</span>
            <span class="job-tag">Statistics</span>
          </div>
          <div class="job-description">
            Analyze large datasets to derive business insights. Strong statistical background required. You'll work with cross-functional teams to drive data-informed decisions.
          </div>
          <div class="job-footer">
            <div class="job-meta">
              <span class="job-salary">$90,000 - $120,000</span>
              <span class="job-location"><i class="fas fa-map-marker-alt"></i> Seattle, WA</span>
            </div>
            <div class="job-posted">Posted 1 week ago</div>
          </div>
          <div class="job-actions">
            <button class="btn btn-primary">Apply Now</button>
            <button class="btn btn-outline">View Details</button>
          </div>
        </div>
      </div>
      
      <div class="load-more">
        <button class="btn btn-outline btn-full">Load More Jobs</button>
      </div>
    </div>
  </div>
</div>
                <!-- Bookmarks Section -->
                <div id="bookmarks-section" class="section">
                    <div class="card">
                        <div class="card-header"><h3>Bookmarks</h3></div>
                        <div class="experience-list" id="bookmarks-list"></div>
                    </div>
                </div>

                <!-- Notifications Section -->
                <div id="notifications-section" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3>Notifications</h3>
                            <button class="btn btn-outline btn-sm" id="markAllRead">Mark all as read</button>
                        </div>
                        
                        <div class="notification-filters">
                            <button class="notification-filter-btn active" data-filter="all">All</button>
                            <button class="notification-filter-btn" data-filter="unread">Unread</button>
                            <button class="notification-filter-btn" data-filter="jobs">Jobs & Career</button>
                            <button class="notification-filter-btn" data-filter="events">Events & Deadlines</button>
                            <button class="notification-filter-btn" data-filter="messages">Messages</button>
                        </div>
                        
                        <div class="notifications-container" id="notifications-list">
                            <!-- Notifications will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings-section" class="section">
                    <div class="settings-header">
                        <h2>Settings</h2>
                        <p>Manage your XShare preferences and account settings</p>
                    </div>

                    <div class="settings-section">
                        <h3>Notifications</h3>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Save location info</h4>
                                <p>Allow website to access your location?</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Use Cellular Data for Videos and Images</h4>
                                <p>Allow media to load when using mobile data</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-divider"></div>

                    <div class="settings-section">
                        <h3>Preferences</h3>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Language</h4>
                                <p>Change app language</p>
                            </div>
                            <div class="select-container">
                                <select>
                                    <option selected>English</option>
                                    <option>Spanish</option>
                                    <option>French</option>
                                    <option>German</option>
                                    <option>Hindi</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Location</h4>
                                <p>Set your location for relevant content</p>
                            </div>
                            <div class="select-container">
                                <select>
                                    <option selected>United States</option>
                                    <option>India</option>
                                    <option>United Kingdom</option>
                                    <option>Canada</option>
                                    <option>Australia</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Local Time</h4>
                                <p>Set your timezone</p>
                            </div>
                            <div class="select-container">
                                <select>
                                    <option selected>(GMT-5:00) Eastern Time</option>
                                    <option>(GMT-8:00) Pacific Time</option>
                                    <option>(GMT+0:00) Greenwich Mean Time</option>
                                    <option>(GMT+5:30) India Standard Time</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="settings-divider"></div>

                    <div class="settings-section">
                        <h3>App Info</h3>
                        <div class="app-info">
                            <p class="app-version">XShare Version 2.1.0</p>
                            <p>¬© 2023 XShare Inc. All rights reserved.</p>
                            <p>From Campus to Career - Share interview experiences and learn from peers.</p>
                        </div>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Terms of Service</h4>
                                <p>View our terms and conditions</p>
                            </div>
                            <a href="#" style="color: var(--secondary);">View</a>
                        </div>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Privacy Policy</h4>
                                <p>How we handle your data</p>
                            </div>
                            <a href="#" style="color: var(--secondary);">View</a>
                        </div>
                        <div class="settings-item">
                            <div class="settings-info">
                                <h4>Clear Cache</h4>
                                <p>Free up storage space</p>
                            </div>
                            <button class="btn btn-outline" style="padding: 6px 12px; font-size: 0.9rem;">Clear</button>
                        </div>
                    </div>
                </div>
                <!-- End Settings Section -->
            </div>
        </div>
        
        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>XShare</h3>
                        <p>From Campus to Career - Share interview experiences and learn from peers to prepare smarter for your career journey.</p>
                        <div class="social-icons">
                            <a href="#"><i class="fab fa-facebook"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                    <div class="footer-section">
                        <h3>Quick Links</h3>
                        <a href="#">Home</a>
                        <a href="#">About Us</a>
                        <a href="#">Careers</a>
                        <a href="#">Blog</a>
                    </div>
                    <div class="footer-section">
                        <h3>Support</h3>
                        <a href="#">FAQ</a>
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Contact Us</a>
                    </div>
                    <div class="footer-section">
                        <h3>Contact</h3>
                        <p><i class="fas fa-map-marker-alt"></i> 123 Campus Road, College Town</p>
                        <p><i class="fas fa-phone"></i> +91 69935465356</p>
                        <p><i class="fas fa-envelope"></i> support@xshare.com</p>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 XShare. All rights reserved.</p>
                </div>
            </div>
        </footer>
    

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="profile-header">
                <div class="profile-avatar" id="modalAvatar">U</div>
                <div class="profile-info">
                    <h2 class="profile-name" id="modalName">User Name</h2>
                    <p class="profile-title" id="modalTitle">Software Engineer at Google</p>
                    <div class="profile-stats">
                        <div class="stat">
                            <div class="stat-value" id="modalExp">24</div>
                            <div class="stat-label">Experiences</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="modalConn">128</div>
                            <div class="stat-label">Connections</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="modalPoints">2.4k</div>
                            <div class="stat-label">Points</div>
                        </div>
                    </div>
                    <a href="#" class="btn btn-primary" id="modalLinkedIn"><i class="fab fa-linkedin"></i> LinkedIn Profile</a>
                </div>
            </div>

            <div class="profile-section">
                <h3>Work Experience</h3>
                <div class="experience-timeline" id="modalWorkExperience">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <div class="profile-section">
                <h3>Shared Experiences</h3>
                <div class="experience-list" id="modalSharedExperiences">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>

        // Theme Toggle Function
        function setupThemeToggle() {
            // Check for saved theme preference or respect OS preference
            const savedTheme = localStorage.getItem('theme');
            const osPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Apply the theme correctly
            if (savedTheme === 'dark' || (!savedTheme && osPrefersDark)) {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
            
            // Toggle theme on button click
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                if (currentTheme === 'light') {
                    document.documentElement.setAttribute('data-theme', 'dark');
                    localStorage.setItem('theme', 'dark');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                } else {
                    document.documentElement.setAttribute('data-theme', 'light');
                    localStorage.setItem('theme', 'light');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                }
            });
        }

        // Initialize theme toggle when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupThemeToggle();
            
            // Rest of your initialization code
            updateUserUI();
            loadExperiences();
            loadQuestions();
            renderTopContributors();
            setupResumeUpload();
            setupExperienceFilters();
            
            // Mobile menu toggle
            document.querySelector('.mobile-menu-btn').addEventListener('click', () => {
                document.querySelector('.nav-links').classList.toggle('active');
            });

            // Add some sample notifications for demo
            setTimeout(() => {
                if (getNotifications().length === 0) {
                    createNotification('system', 'Welcome to XShare! Start exploring and sharing experiences.');
                    createNotification('comment', 'Alex Johnson commented on your experience about Google', 1);
                    createNotification('like', 'Sarah Williams liked your question about interview preparation', 101);
                    createNotification('connection', 'Michael Chen accepted your connection request');
                    createNotification('job', 'We found 5 new jobs matching your skills', null, null, 'high');
                    createNotification('event', 'Google hiring event this Friday - don\'t forget to register!', null, null, 'medium');
                    createNotification('message', 'You have a new message from Alex Johnson');
                }
            }, 1000);
        });
        /* --------------------------
           DOM Elements
        ---------------------------*/
        const loginPage = document.getElementById('loginPage');
        const signupPage = document.getElementById('signupPage');
        const adminLoginPage = document.getElementById('adminLoginPage');
        const appContainer = document.getElementById('appContainer');
        const themeToggle = document.getElementById('themeToggle');

        const showSignup = document.getElementById('showSignup');
        const showLogin = document.getElementById('showLogin');
        const showAdminLogin = document.getElementById('showAdminLogin');
        const showLoginFromAdmin = document.getElementById('showLoginFromAdmin');

        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const adminLoginForm = document.getElementById('adminLoginForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const experienceForm = document.getElementById('experienceForm');

        const userNameTop = document.getElementById('userNameTop');
        const userAvatar = document.getElementById('userAvatar');
        const welcomeName = document.getElementById('userName');
        const pointsText = document.querySelector('.points-badge span');

        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.section');

        const sharedExperiencesList = document.getElementById('shared-experiences-list');
        const myExperiencesList = document.getElementById('my-experiences-list');
        const bookmarksList = document.getElementById('bookmarks-list');

        const resetPasswordLink = document.getElementById('resetPasswordLink');
        const profileModal = document.getElementById('profileModal');
        const closeModal = document.querySelector('.close-modal');

        /* --------------------------
           NEW: Notification Elements
        ---------------------------*/
        const notificationBell = document.getElementById('notificationBell');
        const notificationCount = document.getElementById('notificationCount');
        const notificationsList = document.getElementById('notifications-list');
        const markAllReadBtn = document.getElementById('markAllRead');
        const notificationFilters = document.querySelectorAll('.notification-filter-btn');

        /* --------------------------
           NEW: Job Finder Elements
        ---------------------------*/
        const resumeDropZone = document.getElementById('resumeDropZone');
        const resumeUpload = document.getElementById('resumeUpload');
        const uploadedResume = document.getElementById('uploadedResume');
        const resumeFileName = document.getElementById('resumeFileName');
        const resumeFileSize = document.getElementById('resumeFileSize');
        const removeResume = document.getElementById('removeResume');
        const analyzeResume = document.getElementById('analyzeResume');

        /* --------------------------
           NEW: Experience Filter Elements
        ---------------------------*/
        const filterCompany = document.getElementById('filterCompany');
        const filterRole = document.getElementById('filterRole');
        const filterType = document.getElementById('filterType');
        const filterExperience = document.getElementById('filterExperience');
        const applyFilters = document.getElementById('applyFilters');
        const resetFilters = document.getElementById('resetFilters');

        /* --------------------------
           NEW: Messaging Elements
        ---------------------------*/
        const conversationsList = document.getElementById('conversations-list');
        const chatHeader = document.getElementById('chat-header');
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendMessage = document.getElementById('send-message');

        /* --------------------------
           Sample Data
        ---------------------------*/
        const sampleExperiences = [
            { id: 1, company: "Google",   role: "Software Engineer Intern", type: "Internship", experienceLevel: "Internship",
              details: "Shared technical interview questions and coding challenges faced during the interview process.",
              tips: "Practice data structures and algorithms thoroughly.", author: "Anonymous",
              date: "2 days ago", userId: "user2", files: [] },
            { id: 2, company: "Amazon",   role: "Product Manager", type: "Full-time", experienceLevel: "Mid",
              details: "Case study interview focused on improving the checkout experience for Amazon Fresh.",
              tips: "Prepare for product thinking questions and case studies.", author: "Sarah K.",
              date: "1 week ago", userId: "user3", files: [] },
            { id: 3, company: "Microsoft", role: "Data Scientist", type: "Full-time", experienceLevel: "Senior",
              details: "Technical rounds included SQL queries, Python coding, and machine learning concepts.",
              tips: "Brush up on statistics and ML fundamentals.", author: "Raj P.",
              date: "2 weeks ago", userId: "user4", files: [] }
        ];

        const topContributors = [
            { id: "user10", name: "Alex Johnson", role: "Senior Engineer at Google", exp: 24, conn: 128, points: 2400,
              workExperience: [
                { company: "Google", role: "Senior Software Engineer", period: "2020 - Present" },
                { company: "Microsoft", role: "Software Engineer", period: "2018 - 2020" },
                { company: "Amazon", role: "SDE Intern", period: "Summer 2017" }
              ],
              linkedIn: "https://linkedin.com/in/alexjohnson" },
            { id: "user11", name: "Sarah Williams", role: "Product Manager at Meta", exp: 18, conn: 95, points: 1800,
              workExperience: [
                { company: "Meta", role: "Product Manager", period: "2021 - Present" },
                { company: "Uber", role: "Associate Product Manager", period: "2019 - 2021" }
              ],
              linkedIn: "https://linkedin.com/in/sarahwilliams" },
            { id: "user12", name: "Michael Chen", role: "Data Scientist at Netflix", exp: 32, conn: 156, points: 3200,
              workExperience: [
                { company: "Netflix", role: "Data Scientist", period: "2020 - Present" },
                { company: "Spotify", role: "Data Analyst", period: "2018 - 2020" }
              ],
              linkedIn: "https://linkedin.com/in/michaelchen" },
            { id: "user13", name: "Priya Sharma", role: "ML Engineer at Apple", exp: 21, conn: 112, points: 2100,
              workExperience: [
                { company: "Apple", role: "ML Engineer", period: "2021 - Present" },
                { company: "Intel", role: "Research Intern", period: "Summer 2020" }
              ],
              linkedIn: "https://linkedin.com/in/priyasharma" }
        ];

        const companyQuestions = {
            google: {
                aptitude: [
                    "A train passes a platform in 36 seconds. The same train passes a man in 20 seconds. If the speed of the train is 54 km/hr, what is the length of the platform?",
                    "If a quarter of a number is 12, what is one-third of the same number?",
                    "Complete the series: 2, 6, 12, 20, 30, ?"
                ],
                coding: [
                    "Implement a function to check if a binary tree is a valid BST.",
                    "Write an algorithm to find the longest substring without repeating characters.",
                    "Design a data structure that supports insert, delete, and getRandom in O(1) time."
                ],
                interview: [
                    "How would you design Google Maps?",
                    "Tell me about a time you had to deal with a difficult team member.",
                    "What would you do if you discovered a better approach to a project halfway through its completion?"
                ]
            },
            microsoft: {
                aptitude: [
                    "If 5 workers can build 5 walls in 5 days, how many days would it take 10 workers to build 10 walls?",
                    "A number when divided by 5 leaves a remainder of 3. What is the remainder when the square of the same number is divided by 5?",
                    "Find the missing number: 8, 24, 12, 36, 18, 54, ?"
                ],
                coding: [
                    "Reverse a linked list in groups of given size.",
                    "Find the median of two sorted arrays of different sizes.",
                    "Design a stack that supports getMin() in O(1) time and O(1) extra space."
                ],
                interview: [
                    "How would you design Microsoft Excel?",
                    "Describe a project where you had to learn a new technology quickly.",
                    "How do you handle conflicting priorities when working on multiple projects?"
                ]
            },
            amazon: {
                aptitude: [
                    "A boat takes 4 hours to go downstream and 6 hours to return upstream. If the speed of the stream is 2 km/hr, what is the speed of the boat in still water?",
                    "In how many ways can the letters of the word 'LEADER' be arranged?",
                    "The average of 5 numbers is 25. If one number is excluded, the average becomes 20. What is the excluded number?"
                ],
                coding: [
                    "Implement LRU cache.",
                    "Find the number of islands in a given binary matrix.",
                    "Design a parking lot system."
                ],
                interview: [
                    "How would you design Amazon's recommendation system?",
                    "Tell me about a time you disagreed with your manager's decision.",
                    "Describe a situation where you had to deal with an unhappy customer."
                ]
            }
        };

        /* --------------------------
           NEW: Notification Data and Functions
        ---------------------------*/
        function getNotifications() {
            return JSON.parse(localStorage.getItem('notifications') || '[]');
        }

        function setNotifications(notifications) {
            localStorage.setItem('notifications', JSON.stringify(notifications));
        }

        function createNotification(type, message, relatedItemId = null, relatedUserId = null, priority = 'normal') {
            const notifications = getNotifications();
            const userId = currentUserId();
            
            const notification = {
                id: Date.now(),
                userId: userId,
                type: type,
                message: message,
                relatedItemId: relatedItemId,
                relatedUserId: relatedUserId,
                timestamp: Date.now(),
                read: false,
                priority: priority
            };
            
            notifications.unshift(notification);
            setNotifications(notifications);
            
            // Update notification badge
            updateNotificationBadge();
            
            // If notifications section is active, refresh it
            if (document.getElementById('notifications-section').classList.contains('active')) {
                renderNotifications();
            }
        }

        function updateNotificationBadge() {
            const notifications = getNotifications();
            const userId = currentUserId();
            const unreadCount = notifications.filter(n => n.userId === userId && !n.read).length;
            
            if (unreadCount > 0) {
                notificationCount.textContent = unreadCount;
                notificationCount.style.display = 'flex';
            } else {
                notificationCount.style.display = 'none';
            }
        }

        function renderNotifications(filter = 'all') {
            const notifications = getNotifications();
            const userId = currentUserId();
            let userNotifications = notifications.filter(n => n.userId === userId);
            
            // Apply filter
            if (filter !== 'all') {
                if (filter === 'unread') {
                    userNotifications = userNotifications.filter(n => !n.read);
                } else {
                    userNotifications = userNotifications.filter(n => n.type === filter);
                }
            }
            
            notificationsList.innerHTML = '';
            
            if (userNotifications.length === 0) {
                notificationsList.innerHTML = '<p style="padding: 20px; text-align: center;">No notifications yet.</p>';
                return;
            }
            
            // Group notifications by date
            const today = new Date().setHours(0, 0, 0, 0);
            const yesterday = today - 86400000;
            const thisWeek = today - (86400000 * 7);
            
            const todayNotifications = userNotifications.filter(n => new Date(n.timestamp).setHours(0, 0, 0, 0) === today);
            const yesterdayNotifications = userNotifications.filter(n => new Date(n.timestamp).setHours(0, 0, 0, 0) === yesterday);
            const thisWeekNotifications = userNotifications.filter(n => {
                const notifDate = new Date(n.timestamp).setHours(0, 0, 0, 0);
                return notifDate < yesterday && notifDate >= thisWeek;
            });
            const earlierNotifications = userNotifications.filter(n => new Date(n.timestamp).setHours(0, 0, 0, 0) < thisWeek);
            
            // Render today's notifications
            if (todayNotifications.length > 0) {
                const groupHeader = document.createElement('div');
                groupHeader.className = 'notification-group-header';
                groupHeader.textContent = 'Today';
                notificationsList.appendChild(groupHeader);
                
                todayNotifications.forEach(notification => {
                    renderNotificationItem(notification);
                });
            }
            
            // Render yesterday's notifications
            if (yesterdayNotifications.length > 0) {
                const groupHeader = document.createElement('div');
                groupHeader.className = 'notification-group-header';
                groupHeader.textContent = 'Yesterday';
                notificationsList.appendChild(groupHeader);
                
                yesterdayNotifications.forEach(notification => {
                    renderNotificationItem(notification);
                });
            }
            
            // Render this week's notifications
            if (thisWeekNotifications.length > 0) {
                const groupHeader = document.createElement('div');
                groupHeader.className = 'notification-group-header';
                groupHeader.textContent = 'This Week';
                notificationsList.appendChild(groupHeader);
                
                thisWeekNotifications.forEach(notification => {
                    renderNotificationItem(notification);
                });
            }
            
            // Render earlier notifications
            if (earlierNotifications.length > 0) {
                const groupHeader = document.createElement('div');
                groupHeader.className = 'notification-group-header';
                groupHeader.textContent = 'Earlier';
                notificationsList.appendChild(groupHeader);
                
                earlierNotifications.forEach(notification => {
                    renderNotificationItem(notification);
                });
            }
            
            // Add event listeners
            document.querySelectorAll('.mark-as-read').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('data-id');
                    markNotificationAsRead(id);
                });
            });
            
            document.querySelectorAll('.view-related').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('data-id');
                    const notification = getNotifications().find(n => n.id == id);
                    if (notification && notification.relatedItemId) {
                        // In a real app, this would navigate to the related item
                        alert(`Navigating to item ${notification.relatedItemId}`);
                        markNotificationAsRead(id);
                    }
                });
            });
        }

        function renderNotificationItem(notification) {
            const notificationEl = document.createElement('div');
            notificationEl.className = `notification-item ${notification.read ? '' : 'unread'}`;
            
            let icon = 'fas fa-bell';
            let color = 'var(--info)';
            
            switch (notification.type) {
                case 'comment':
                    icon = 'fas fa-comment';
                    color = 'var(--success)';
                    break;
                case 'like':
                    icon = 'fas fa-thumbs-up';
                    color = 'var(--primary)';
                    break;
                case 'connection':
                    icon = 'fas fa-user-plus';
                    color = 'var(--secondary)';
                    break;
                case 'job':
                    icon = 'fas fa-briefcase';
                    color = 'var(--warning)';
                    break;
                case 'event':
                    icon = 'fas fa-calendar';
                    color = 'var(--danger)';
                    break;
                case 'message':
                    icon = 'fas fa-envelope';
                    color = 'var(--accent)';
                    break;
            }
            
            let priorityBadge = '';
            if (notification.priority === 'high') {
                priorityBadge = '<span class="notification-priority high">High Priority</span>';
            } else if (notification.priority === 'medium') {
                priorityBadge = '<span class="notification-priority medium">Medium Priority</span>';
            }
            
            let actionButton = '';
            if (notification.type === 'job') {
                actionButton = '<button class="btn btn-primary btn-sm">Apply Now</button>';
            } else if (notification.type === 'event') {
                actionButton = '<button class="btn btn-primary btn-sm">Add to Calendar</button>';
            } else if (notification.type === 'message') {
                actionButton = '<button class="btn btn-primary btn-sm">Reply</button>';
            }
            
            notificationEl.innerHTML = `
                ${priorityBadge}
                <div class="notification-icon" style="background-color: ${color}">
                    <i class="${icon}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${sanitize(notification.message)}</div>
                    <div class="notification-time">${timeAgo(notification.timestamp)}</div>
                    <div class="notification-actions">
                        ${!notification.read ? `<button class="btn btn-sm btn-outline mark-as-read" data-id="${notification.id}">Mark as read</button>` : ''}
                        ${notification.relatedItemId ? `<button class="btn btn-sm btn-primary view-related" data-id="${notification.id}">View</button>` : ''}
                        ${actionButton}
                    </div>
                </div>
            `;
            
            notificationsList.appendChild(notificationEl);
        }

        function markNotificationAsRead(id) {
            const notifications = getNotifications();
            const notification = notifications.find(n => n.id == id);
            if (notification) {
                notification.read = true;
                setNotifications(notifications);
                renderNotifications();
                updateNotificationBadge();
            }
        }

        function markAllNotificationsAsRead() {
            const notifications = getNotifications();
            const userId = currentUserId();
            
            notifications.forEach(notification => {
                if (notification.userId === userId && !notification.read) {
                    notification.read = true;
                }
            });
            
            setNotifications(notifications);
            renderNotifications();
            updateNotificationBadge();
        }

        /* --------------------------
           NEW: Job Finder Functions
        ---------------------------*/
        function setupResumeUpload() {
            // Click on drop zone to trigger file input
            resumeDropZone.addEventListener('click', () => {
                resumeUpload.click();
            });
            
            // Drag and drop events
            resumeDropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                resumeDropZone.style.backgroundColor = 'rgba(126, 200, 227, 0.2)';
            });
            
            resumeDropZone.addEventListener('dragleave', () => {
                resumeDropZone.style.backgroundColor = '';
            });
            
            resumeDropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                resumeDropZone.style.backgroundColor = '';
                
                if (e.dataTransfer.files.length) {
                    handleResumeFile(e.dataTransfer.files[0]);
                }
            });
            
            // File input change event
            resumeUpload.addEventListener('change', () => {
                if (resumeUpload.files.length) {
                    handleResumeFile(resumeUpload.files[0]);
                }
            });
            
            // Remove resume event
            removeResume.addEventListener('click', () => {
                uploadedResume.classList.add('hidden');
                resumeUpload.value = '';
            });
            
            // Analyze resume event
            analyzeResume.addEventListener('click', () => {
                alert('Analyzing your resume and finding matching jobs...');
                // In a real app, this would send the resume to a backend for analysis
                // and then show personalized job recommendations
                
                // Create a notification about job matches
                createNotification('job', 'We found 15 new jobs matching your resume!', null, null, 'high');
            });
        }

        function handleResumeFile(file) {
            const validTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
            
            if (!validTypes.includes(file.type)) {
                alert('Please upload a PDF, DOC, or DOCX file.');
                return;
            }
            
            // Show file info
            resumeFileName.textContent = file.name;
            resumeFileSize.textContent = formatFileSize(file.size);
            uploadedResume.classList.remove('hidden');
            
            // In a real app, you would upload the file to a server here
            // For this demo, we'll just store the file name in localStorage
            localStorage.setItem('userResume', file.name);
        }

        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' bytes';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / 1048576).toFixed(1) + ' MB';
        }

        /* --------------------------
           NEW: Experience Filter Functions
        ---------------------------*/
        function setupExperienceFilters() {
            applyFilters.addEventListener('click', () => {
                loadExperiences();
            });
            
            resetFilters.addEventListener('click', () => {
                filterCompany.value = '';
                filterRole.value = '';
                filterType.value = '';
                filterExperience.value = '';
                loadExperiences();
            });
        }

        function filterExperiences(experiences) {
            const companyFilter = filterCompany.value.toLowerCase();
            const roleFilter = filterRole.value.toLowerCase();
            const typeFilter = filterType.value;
            const experienceFilter = filterExperience.value;
            
            return experiences.filter(exp => {
                if (companyFilter && !exp.company.toLowerCase().includes(companyFilter)) return false;
                if (roleFilter && !exp.role.toLowerCase().includes(roleFilter)) return false;
                if (typeFilter && exp.type !== typeFilter) return false;
                if (experienceFilter && exp.experienceLevel !== experienceFilter) return false;
                return true;
            });
        }

        /* --------------------------
           NEW: Messaging Functions
        ---------------------------*/
        function setupMessaging() {
            // Sample conversations
            const conversations = [
                { id: 'conv1', userId: 'user10', userName: 'Alex Johnson', lastMessage: 'Hey, how did your Google interview go?', timestamp: Date.now() - 3600000, unread: true },
                { id: 'conv2', userId: 'user11', userName: 'Sarah Williams', lastMessage: 'I can refer you to my team at Meta!', timestamp: Date.now() - 86400000, unread: false },
                { id: 'conv3', userId: 'user12', userName: 'Michael Chen', lastMessage: 'The DSA preparation tips were really helpful', timestamp: Date.now() - 172800000, unread: false }
            ];
            
            // Render conversations
            renderConversations(conversations);
            
            // Send message event
            sendMessage.addEventListener('click', () => {
                const message = messageInput.value.trim();
                if (!message) return;
                
                // In a real app, this would send the message to the server
                const activeConversation = conversationsList.querySelector('.conversation-item.active');
                if (activeConversation) {
                    const conversationId = activeConversation.getAttribute('data-id');
                    const conversation = conversations.find(c => c.id === conversationId);
                    
                    // Add message to chat
                    addMessageToChat(message, true, conversation.userName);
                    
                    // Clear input
                    messageInput.value = '';
                    
                    // Simulate reply after 1-3 seconds
                    setTimeout(() => {
                        const replies = [
                            "Thanks for your message!",
                            "I'll get back to you soon.",
                            "That's interesting, tell me more!",
                            "I appreciate you reaching out."
                        ];
                        const randomReply = replies[Math.floor(Math.random() * replies.length)];
                        addMessageToChat(randomReply, false, conversation.userName);
                    }, 1000 + Math.random() * 2000);
                }
            });
            
            // Send message on Enter key
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage.click();
                }
            });
        }

        function renderConversations(conversations) {
            conversationsList.innerHTML = '';
            
            conversations.forEach(conversation => {
                const conversationEl = document.createElement('div');
                conversationEl.className = `conversation-item ${conversation.unread ? 'unread' : ''}`;
                conversationEl.setAttribute('data-id', conversation.id);
                
                conversationEl.innerHTML = `
                    <div class="conversation-header">
                        <div class="conversation-user">${conversation.userName}</div>
                        <div class="conversation-time">${timeAgo(conversation.timestamp)}</div>
                    </div>
                    <div class="conversation-preview">${conversation.lastMessage}</div>
                `;
                
                conversationEl.addEventListener('click', () => {
                    // Set active conversation
                    conversationsList.querySelectorAll('.conversation-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    conversationEl.classList.add('active');
                    
                    // Enable message input
                    messageInput.disabled = false;
                    sendMessage.disabled = false;
                    
                    // Update chat header
                    chatHeader.innerHTML = `<h4>Chat with ${conversation.userName}</h4>`;
                    
                    // Load messages
                    loadMessages(conversation.id);
                });
                
                conversationsList.appendChild(conversationEl);
            });
        }

        function loadMessages(conversationId) {
            // In a real app, this would load messages from the server
            // For demo, we'll just show some sample messages
            chatMessages.innerHTML = '';
            
            const sampleMessages = [
                { text: "Hi there! How can I help you with your career journey?", sent: false, timestamp: Date.now() - 3600000 },
                { text: "I wanted to ask about your experience at Google.", sent: true, timestamp: Date.now() - 3500000 },
                { text: "Sure! I'd be happy to share my experience. What would you like to know?", sent: false, timestamp: Date.now() - 3400000 }
            ];
            
            sampleMessages.forEach(message => {
                addMessageToChat(message.text, message.sent, message.sent ? 'You' : 'Them', message.timestamp);
            });
        }

        function addMessageToChat(text, sent, sender, timestamp = Date.now()) {
            const messageEl = document.createElement('div');
            messageEl.className = `message ${sent ? 'sent' : 'received'}`;
            
            messageEl.innerHTML = `
                <div class="message-content">${sanitize(text)}</div>
                <div class="message-time">${timeAgo(timestamp)}</div>
            `;
            
            chatMessages.appendChild(messageEl);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }


        /* --------------------------
           Utilities
        ---------------------------*/
        const sanitize = (s) => (s || '').replace(/[<>]/g, '').trim();

        function getNameFromEmail(email){
            if(!email) return null;
            const namePart = email.split('@')[0] || '';
            if(!namePart) return null;
            return namePart.replace(/[\.\_\-]+/g,' ').trim().split(' ')
                .map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(' ');
        }
        function initialsFromName(name){
            const parts = (name||'').trim().split(/\s+/);
            if(!parts[0]) return 'U';
            const first = parts[0].charAt(0);
            const second = parts.length>1 ? parts[1].charAt(0) : '';
            return (first + second).toUpperCase();
        }
        function updateUserUI(){
            const name = localStorage.getItem('userName') || 'User';
            if(userNameTop) userNameTop.textContent = name;
            if(welcomeName) welcomeName.textContent = name;
            if(userAvatar) userAvatar.textContent = initialsFromName(name);
            const points = parseInt(localStorage.getItem('userPoints') || '1250', 10);
            if(pointsText) pointsText.textContent = points.toLocaleString() + ' Points';
            
            // Update notification badge
            updateNotificationBadge();
        }
        function setUserName(name, userId){
            if(name && name.trim()){
                localStorage.setItem('userName', name.trim());
                localStorage.setItem('userId', userId);
            }
            updateUserUI();
        }
        const timeAgo = ts => {
            if(!ts) return 'Just now';
            const s = Math.floor((Date.now() - ts) / 1000);
            if(s < 60) return `${s}s ago`;
            const m = Math.floor(s/60); if(m < 60) return `${m}m ago`;
            const h = Math.floor(m/60); if(h < 24) return `${h}h ago`;
            const d = Math.floor(h/24); return `${d}d ago`;
        };

        /* --------------------------
           Auth Storage (localStorage)
           users: { [emailLower]: { email, name, batch, password, userId } }
        ---------------------------*/
        function getUsers(){
            return JSON.parse(localStorage.getItem('users') || '{}');
        }
        function setUsers(users){
            localStorage.setItem('users', JSON.stringify(users));
        }
        function currentUserId(){
            return localStorage.getItem('userId') || '';
        }
        function userKey(email){ return (email || '').trim().toLowerCase(); }

        /* --------------------------
           Experiences & Bookmarks
        ---------------------------*/
        function getUserExperiences(){
            return JSON.parse(localStorage.getItem('userExperiences') || '[]');
        }
        function setUserExperiences(arr){
            localStorage.setItem('userExperiences', JSON.stringify(arr));
        }
        function getBookmarks(uid){
            const all = JSON.parse(localStorage.getItem('bookmarks') || '{}');
            return all[uid] || [];
        }
        function setBookmarks(uid, ids){
            const all = JSON.parse(localStorage.getItem('bookmarks') || '{}');
            all[uid] = ids;
            localStorage.setItem('bookmarks', JSON.stringify(all));
        }
        function isBookmarked(uid, id){
            const list = getBookmarks(uid);
            return list.includes(id);
        }

        /* --------------------------
           Rendering
        ---------------------------*/
        function fileLinksHTML(files){
            if(!files || !files.length) return '';
            return `<div class="file-links"><strong>Attachments:</strong> ` +
                files.map((f, idx) => `<a href="${f.data}" download="${f.name}" target="_blank"><i class="fa-regular fa-file"></i> ${f.name}</a>`).join(' ') +
                `</div>`;
        }

        function renderExperiences(experiences, container, {ownerOnly=false, showActions=true}={}){
            container.innerHTML = '';
            const uid = currentUserId();
            
            // Apply filters if we're in the share-experience section
            if (container.id === 'shared-experiences-list') {
                experiences = filterExperiences(experiences);
            }
            
            experiences.forEach(exp => {
                if (ownerOnly && exp.userId !== uid) return;

                const wrap = document.createElement('div');
                wrap.className = 'experience-item';

                // safe text
                const company = sanitize(exp.company);
                const role = sanitize(exp.role);
                const type = sanitize(exp.type);
                const details = sanitize(exp.details);
                const tips = sanitize(exp.tips);
                const author = sanitize(exp.author);

                wrap.innerHTML = `
                    <div class="experience-header">
                        <div class="company-info">
                            <div class="company-logo">${company.charAt(0) || '?'}</div>
                            <div>
                                <h4>${company}</h4>
                                <p>${role}</p>
                            </div>
                        </div>
                        <span class="job-type">${type}</span>
                    </div>
                    <p>${details}</p>
                    ${tips ? `<p><strong>Preparation Tips:</strong> ${tips}</p>` : ''}
                    ${fileLinksHTML(exp.files)}
                    <div class="experience-meta">
                        <span>By: ${author || 'Anonymous'}</span>
                        <span>${exp.timestamp ? timeAgo(exp.timestamp) : (exp.date || '')}</span>
                    </div>
                `;

                if(showActions){
                    const actions = document.createElement('div');
                    actions.className = 'actions';

                    // Bookmark toggle
                    const bmBtn = document.createElement('button');
                    bmBtn.className = 'btn btn-outline btn-sm';
                    const bmState = isBookmarked(uid, exp.id);
                    bmBtn.innerHTML = bmState ? `<i class="fas fa-star"></i> Saved` : `<i class="far fa-star"></i> Save`;
                    bmBtn.addEventListener('click', () => {
                        const list = getBookmarks(uid);
                        if(list.includes(exp.id)){
                            setBookmarks(uid, list.filter(x => x !== exp.id));
                        } else {
                            setBookmarks(uid, [...list, exp.id]);
                        }
                        loadExperiences(); // refresh all lists
                    });
                    actions.appendChild(bmBtn);

                    // Like button
                    const likeBtn = document.createElement('button');
                    likeBtn.className = 'btn btn-outline btn-sm';
                    likeBtn.innerHTML = `<i class="far fa-thumbs-up"></i> Like`;
                    likeBtn.addEventListener('click', () => {
                        alert('Liked this experience!');
                        // Create a notification for the experience owner
                        createNotification('like', `${localStorage.getItem('userName')} liked your experience about ${company}`, exp.id, exp.userId);
                    });
                    actions.appendChild(likeBtn);

                    // Comment button
                    const commentBtn = document.createElement('button');
                    commentBtn.className = 'btn btn-outline btn-sm';
                    commentBtn.innerHTML = `<i class="far fa-comment"></i> Comment`;
                    commentBtn.addEventListener('click', () => {
                        const comment = prompt('Add a comment:');
                        if (comment) {
                            alert('Comment added!');
                            // Create a notification for the experience owner
                            createNotification('comment', `${localStorage.getItem('userName')} commented on your experience about ${company}`, exp.id, exp.userId);
                        }
                    });
                    actions.appendChild(commentBtn);

                    // Delete (only for owner)
                    if(exp.userId === uid){
                        const delBtn = document.createElement('button');
                        delBtn.className = 'btn btn-primary btn-sm';
                        delBtn.innerHTML = `<i class="fas fa-trash"></i> Delete`;
                        delBtn.addEventListener('click', () => {
                            if(confirm('Delete this experience?')){
                                const all = getUserExperiences();
                                const filtered = all.filter(e => e.id !== exp.id);
                                setUserExperiences(filtered);
                                // also remove from bookmarks
                                const list = getBookmarks(uid).filter(x => x !== exp.id);
                                setBookmarks(uid, list);
                                loadExperiences();
                            }
                        });
                        actions.appendChild(delBtn);
                    }

                    wrap.appendChild(actions);
                }

                container.appendChild(wrap);
            });
        }

        function renderTopContributors() {
            const container = document.getElementById('top-contributors-list');
            container.innerHTML = '';
           
            topContributors.forEach(contributor => {
                const card = document.createElement('div');
                card.className = 'contributor-card';
               
                card.innerHTML = `
                    <div class="contributor-avatar">${initialsFromName(contributor.name)}</div>
                    <div class="contributor-name">${sanitize(contributor.name)}</div>
                    <div class="contributor-role">${sanitize(contributor.role)}</div>
                    <div class="contributor-stats">
                        <div class="stat">
                            <div class="stat-value">${contributor.exp}</div>
                            <div class="stat-label">Experiences</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${contributor.conn}</div>
                            <div class="stat-label">Connections</div>
                        </div>
                    </div>
                    <div class="contributor-actions">
                        <button class="btn btn-primary btn-sm connect-btn" data-id="${contributor.id}">Let's Connect</button>
                        <button class="btn btn-outline btn-sm view-profile-btn" data-id="${contributor.id}">View Profile</button>
                        <button class="btn btn-outline btn-sm message-btn" data-id="${contributor.id}" data-name="${contributor.name}">Message</button>
                    </div>
                `;
               
                container.appendChild(card);
            });
           
            // Add event listeners to buttons
            document.querySelectorAll('.connect-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const contributorId = btn.getAttribute('data-id');
                    alert(`Connection request sent to ${contributorId}`);
                    // Create a notification for the connection request
                    createNotification('connection', `You sent a connection request to ${contributorId}`);
                });
            });
           
            document.querySelectorAll('.view-profile-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const contributorId = btn.getAttribute('data-id');
                    openContributorProfile(contributorId);
                });
            });
            
            document.querySelectorAll('.message-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const contributorId = btn.getAttribute('data-id');
                    const contributorName = btn.getAttribute('data-name');
                    // Switch to Let's Connect section and open chat with this user
                    switchSection('lets-connect');
                    
                    // In a real app, this would open a chat with the selected user
                    setTimeout(() => {
                        alert(`Opening chat with ${contributorName}`);
                    }, 500);
                });
            });
        }
       
        function openContributorProfile(contributorId) {
            const contributor = topContributors.find(c => c.id === contributorId);
            if (!contributor) return;
           
            // Set modal content
            document.getElementById('modalAvatar').textContent = initialsFromName(contributor.name);
            document.getElementById('modalName').textContent = contributor.name;
            document.getElementById('modalTitle').textContent = contributor.role;
            document.getElementById('modalExp').textContent = contributor.exp;
            document.getElementById('modalConn').textContent = contributor.conn;
            document.getElementById('modalPoints').textContent = contributor.points.toLocaleString();
            document.getElementById('modalLinkedIn').href = contributor.linkedIn;
           
            // Render work experience
            const workExpContainer = document.getElementById('modalWorkExperience');
            workExpContainer.innerHTML = '';
           
            contributor.workExperience.forEach(exp => {
                const item = document.createElement('div');
                item.className = 'timeline-item';
                item.innerHTML = `
                    <div class="timeline-date">${exp.period}</div>
                    <h4>${exp.role} at ${exp.company}</h4>
                `;
                workExpContainer.appendChild(item);
            });
           
            // Render shared experiences (filtered by user ID)
            const sharedExpContainer = document.getElementById('modalSharedExperiences');
            sharedExpContainer.innerHTML = '';
           
            const userExperiences = getUserExperiences().filter(exp => exp.userId === contributorId);
            if (userExperiences.length === 0) {
                sharedExpContainer.innerHTML = '<p>No shared experiences yet.</p>';
            } else {
                renderExperiences(userExperiences, sharedExpContainer, {ownerOnly: false, showActions: false});
            }
           
            // Show the modal
            profileModal.style.display = 'flex';
        }
       
        function renderCompanyRoadmap(company) {
            const roadmapContainer = document.getElementById('company-roadmap');
            roadmapContainer.classList.remove('hidden');
           
            // Set company name
            document.getElementById('roadmap-company-name').textContent = `${company.charAt(0).toUpperCase() + company.slice(1)} Interview Roadmap`;
            document.getElementById('suggested-company-name').textContent = company.charAt(0).toUpperCase() + company.slice(1);
           
            // Render suggested connections (filter contributors who worked at this company)
            const suggestedConnections = document.getElementById('suggested-connections');
            suggestedConnections.innerHTML = '';
           
            const filteredContributors = topContributors.filter(contributor =>
                contributor.workExperience.some(exp =>
                    exp.company.toLowerCase().includes(company.toLowerCase())
                )
            );
           
            if (filteredContributors.length === 0) {
                suggestedConnections.innerHTML = '<p>No connections found for this company.</p>';
            } else {
                filteredContributors.forEach(contributor => {
                    const card = document.createElement('div');
                    card.className = 'contributor-card';
                   
                    card.innerHTML = `
                        <div class="contributor-avatar">${initialsFromName(contributor.name)}</div>
                        <div class="contributor-name">${sanitize(contributor.name)}</div>
                        <div class="contributor-role">${sanitize(contributor.role)}</div>
                        <div class="contributor-actions">
                            <button class="btn btn-primary btn-sm connect-btn" data-id="${contributor.id}">Connect</button>
                            <button class="btn btn-outline btn-sm view-profile-btn" data-id="${contributor.id}">View Profile</button>
                        </div>
                    `;
                   
                    suggestedConnections.appendChild(card);
                });
               
                // Add event listeners to buttons
                document.querySelectorAll('.connect-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const contributorId = btn.getAttribute('data-id');
                        alert(`Connection request sent to ${contributorId}`);
                    });
                });
               
                document.querySelectorAll('.view-profile-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const contributorId = btn.getAttribute('data-id');
                        openContributorProfile(contributorId);
                    });
                });
            }
           
            // Render questions
            const questions = companyQuestions[company] || companyQuestions.google; // Default to Google if company not found
           
            // Aptitude questions
            const aptitudeContainer = document.getElementById('aptitude-questions');
            aptitudeContainer.innerHTML = '';
            questions.aptitude.forEach((q, index) => {
                const item = document.createElement('div');
                item.className = 'question-item';
                item.innerHTML = `<p>${index + 1}. ${q}</p>`;
                aptitudeContainer.appendChild(item);
            });
           
            // Coding questions
            const codingContainer = document.getElementById('coding-questions');
            codingContainer.innerHTML = '';
            questions.coding.forEach((q, index) => {
                const item = document.createElement('div');
                item.className = 'question-item';
                item.innerHTML = `<p>${index + 1}. ${q}</p>`;
                codingContainer.appendChild(item);
            });
           
            // Interview questions
            const interviewContainer = document.getElementById('interview-questions');
            interviewContainer.innerHTML = '';
            questions.interview.forEach((q, index) => {
                const item = document.createElement('div');
                item.className = 'question-item';
                item.innerHTML = `<p>${index + 1}. ${q}</p>`;
                interviewContainer.appendChild(item);
            });
           
            // Add tab switching functionality
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    button.classList.add('active');
                   
                    // Hide all question lists
                    document.getElementById('aptitude-questions').classList.add('hidden');
                    document.getElementById('coding-questions').classList.add('hidden');
                    document.getElementById('interview-questions').classList.add('hidden');
                   
                    // Show the selected question list
                    const tabName = button.getAttribute('data-tab');
                    document.getElementById(`${tabName}-questions`).classList.remove('hidden');
                });
            });
        }

        function loadExperiences(){
            const uid = currentUserId();
            const userExperiences = getUserExperiences();
            const allExperiences = [...sampleExperiences, ...userExperiences];

            renderExperiences(allExperiences, sharedExperiencesList, {ownerOnly:false, showActions:true});
            renderExperiences(userExperiences, myExperiencesList, {ownerOnly:true, showActions:true});

            // bookmarks
            const bmIds = new Set(getBookmarks(uid));
            const bmItems = allExperiences.filter(x => bmIds.has(x.id));
            renderExperiences(bmItems, bookmarksList, {ownerOnly:false, showActions:true});
        }

        function switchSection(sectionId){
            sections.forEach(s => s.classList.remove('active'));
            const target = document.getElementById(`${sectionId}-section`);
            if(target){ target.classList.add('active'); }
            navLinks.forEach(link => {
                link.classList.remove('active');
                if(link.getAttribute('data-section') === sectionId){
                    link.classList.add('active');
                }
            });
           
            // Load specific content for sections
            if(sectionId === 'dashboard'){
                loadExperiences();
            } else if(sectionId === 'lets-connect'){
                renderTopContributors();
                setupMessaging();
            } else if(sectionId === 'my-journey'){
                // Add event listeners to company cards
                document.querySelectorAll('.company-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const company = card.getAttribute('data-company');
                        renderCompanyRoadmap(company);
                    });
                });
            } else if(sectionId === 'notifications'){
                renderNotifications();
            } else if(['share-experience','my-experiences','bookmarks'].includes(sectionId)){
                loadExperiences();
            }
        }

        /* --------------------------
           Navigation
        ---------------------------*/
        showSignup.addEventListener('click', (e)=>{ e.preventDefault(); loginPage.classList.add('hidden'); signupPage.classList.remove('hidden'); adminLoginPage.classList.add('hidden'); });
        showLogin.addEventListener('click', (e)=>{ e.preventDefault(); signupPage.classList.add('hidden'); loginPage.classList.remove('hidden'); adminLoginPage.classList.add('hidden'); });
        showAdminLogin.addEventListener('click', (e)=>{ e.preventDefault(); loginPage.classList.add('hidden'); signupPage.classList.add('hidden'); adminLoginPage.classList.remove('hidden'); });
        showLoginFromAdmin.addEventListener('click', (e)=>{ e.preventDefault(); adminLoginPage.classList.add('hidden'); loginPage.classList.remove('hidden'); signupPage.classList.add('hidden'); });

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('data-section');
                if(sectionId){ switchSection(sectionId); }
            });
        });

        // Notification bell click
        notificationBell.addEventListener('click', () => {
            switchSection('notifications');
        });

        // Notification filter buttons
        notificationFilters.forEach(btn => {
            btn.addEventListener('click', () => {
                notificationFilters.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderNotifications(btn.getAttribute('data-filter'));
            });
        });

        // Mark all as read button
        markAllReadBtn.addEventListener('click', markAllNotificationsAsRead);

        // Close modal when clicking on X
        closeModal.addEventListener('click', () => {
            profileModal.style.display = 'none';
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === profileModal) {
                profileModal.style.display = 'none';
            }
        });

        /* --------------------------
           Auth: Signup / Login / Reset
        ---------------------------*/
        signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = sanitize(document.getElementById('signupName').value);
            const email = sanitize(document.getElementById('signupEmail').value);
            const pass = document.getElementById('signupPassword').value;
            const pass2 = document.getElementById('signupConfirmPassword').value;
            const batch = sanitize(document.getElementById('signupBatch').value);

            if(pass !== pass2){ alert('Passwords do not match'); return; }
            if(pass.length < 8){ alert('Use at least 8 characters for password'); return; }

            const users = getUsers();
            const key = userKey(email);
            if(users[key]){ alert('Account already exists with this email'); return; }

            const uid = 'u_' + key;
            users[key] = { email, name: name || getNameFromEmail(email) || 'User', batch, password: pass, userId: uid };
            setUsers(users);

            localStorage.setItem('userPoints', '1250');
            setUserName(users[key].name, uid);

            signupPage.classList.add('hidden');
            loginPage.classList.add('hidden');
            adminLoginPage.classList.add('hidden');
            appContainer.classList.remove('hidden');

            // Create welcome notification
            createNotification('system', 'Welcome to XShare! Start exploring and sharing experiences.');

            loadExperiences();
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = sanitize(document.getElementById('loginEmail').value);
            const pass = document.getElementById('loginPassword').value;

            const users = getUsers();
            const key = userKey(email);
            const record = users[key];

            if(!record){ alert('No account found with this email. Please sign up.'); return; }
            if(record.password !== pass){ alert('Incorrect password'); return; }

            localStorage.setItem('userPoints', localStorage.getItem('userPoints') || '1250');
            setUserName(record.name, record.userId);

            loginPage.classList.add('hidden');
            signupPage.classList.add('hidden');
            adminLoginPage.classList.add('hidden');
            appContainer.classList.remove('hidden');

            loadExperiences();
        });

        resetPasswordLink.addEventListener('click', (e) => {
            e.preventDefault();
            const email = prompt('Enter your registered email to reset password:');
            if(!email) return;

            const users = getUsers();
            const key = userKey(email);
            const record = users[key];
            if(!record){ alert('No account found with this email.'); return; }

            const newPass = prompt('Enter new password (min 8 characters):');
            if(!newPass || newPass.length < 8){ alert('Password too short.'); return; }
            const confirmPass = prompt('Confirm new password:');
            if(newPass !== confirmPass){ alert('Passwords do not match.'); return; }

            record.password = newPass;
            users[key] = record;
            setUsers(users);
            alert('Password has been reset successfully. You can now login.');
        });

        /* --------------------------
           Admin (demo)
        ---------------------------*/
        adminLoginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            alert('Admin login successful! Redirecting to admin dashboard in a real app.');
            adminLoginPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        });

        logoutBtn.addEventListener('click', (e) => {
            e.preventDefault();
            appContainer.classList.add('hidden');
            loginPage.classList.remove('hidden');
        });

        /* --------------------------
           Experience Form (with attachments)
        ---------------------------*/
        function readFilesAsData(files){
            // Store as base64 (works offline + persists). For demo only.
            const readers = [];
            const results = [];
            for(const file of files){
                const extOk = /\.(pdf|jpg|jpeg)$/i.test(file.name);
                if(!extOk) continue;
                const reader = new FileReader();
                readers.push(new Promise((resolve) => {
                    reader.onload = () => {
                        results.push({ name:file.name, type:file.type, data: reader.result });
                        resolve();
                    };
                    reader.readAsDataURL(file);
                }));
            }
            return Promise.all(readers).then(() => results);
        }

        experienceForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const companyName = sanitize(document.getElementById('companyName').value);
            const jobRole = sanitize(document.getElementById('jobRole').value);
            const jobType = sanitize(document.getElementById('jobType').value);
            const experienceLevel = sanitize(document.getElementById('experienceLevel').value);
            const experienceDetails = sanitize(document.getElementById('experienceDetails').value);
            const preparationTips = sanitize(document.getElementById('preparationTips').value);
            const isAnonymous = document.getElementById('anonymousToggle').checked;
            const tipsFilesInput = document.getElementById('tipsFiles');

            const userName = localStorage.getItem('userName') || 'User';
            const userId = currentUserId() || 'user1';


            // read selected files
            const files = await readFilesAsData(tipsFilesInput.files || []);

            const newExperience = {
                id: Date.now(),
                company: companyName,
                role: jobRole,
                type: jobType,
                experienceLevel: experienceLevel,
                details: experienceDetails,
                tips: preparationTips,
                author: isAnonymous ? 'Anonymous' : userName,
                timestamp: Date.now(),
                userId,
                files
            };

            const userExperiences = getUserExperiences();
            userExperiences.push(newExperience);
            setUserExperiences(userExperiences);

            function timeAgo(timestamp) {
  const now = Date.now();
  const seconds = Math.floor((now - timestamp) / 1000);

  if (seconds < 60) return "just now";
  const minutes = Math.floor(seconds / 60);
  if (minutes < 60) return `${minutes} min ago`;
  const hours = Math.floor(minutes / 60);
  if (hours < 24) return `${hours} hr ago`;
  const days = Math.floor(hours / 24);
  if (days < 7) return `${days} days ago`;
  const weeks = Math.floor(days / 7);
  return `${weeks} week${weeks > 1 ? "s" : ""} ago`;
}

const timeElement = document.createElement("p");
timeElement.className = "experience-time";
timeElement.innerText = timeAgo(exp.timestamp);  // ‚úÖ dynamic
experienceCard.appendChild(timeElement);



            // points +50 on submit (demo)
            const pts = parseInt(localStorage.getItem('userPoints') || '1250', 10) + 50;
            localStorage.setItem('userPoints', String(pts));

            // Create notification for the user
            createNotification('system', `Your experience about ${companyName} has been shared successfully!`, newExperience.id);

            loadExperiences();
            experienceForm.reset();
            alert('Your experience has been shared successfully!');
        });

        function getQuestions() {
            return JSON.parse(localStorage.getItem("questions") || "[]");
        }
        function setQuestions(arr) {
            localStorage.setItem("questions", JSON.stringify(arr));
        }
        function getComments() {
            return JSON.parse(localStorage.getItem("comments") || "[]");
        }
        function setComments(arr) {
            localStorage.setItem("comments", JSON.stringify(arr));
        }

        function renderQuestions(questions, container, { ownerOnly = false } = {}) {
            container.innerHTML = "";
            const uid = currentUserId();
            const comments = getComments();

            questions.forEach(q => {
                if (ownerOnly && q.userId !== uid) return;

                const div = document.createElement("div");
                div.className = "experience-item"; // reuse style
                const tags = q.tags && q.tags.length ? q.tags.map(t => `<span class="job-type">${sanitize(t)}</span>`).join(" ") : "";
                div.innerHTML = `
                    <div class="experience-header">
                        <div class="company-info">
                            <div class="company-logo">${sanitize(q.userName).charAt(0)}</div>
                            <div><h4>${sanitize(q.title)}</h4><p>${sanitize(q.userName)}</p></div>
                        </div>
                        ${q.userId === uid ? `<button class="btn btn-sm btn-primary delete-q" data-id="${q.id}">Delete</button>` : ""}
                    </div>
                    <p>${sanitize(q.content)}</p>
                    ${tags}
                    <div class="experience-meta">
                        <span><i class="far fa-thumbs-up"></i> 0</span>
                        <span>${timeAgo(q.timestamp)}</span>
                    </div>
                    <div class="comments-list" id="comments-${q.id}">
                        ${comments.filter(c => c.questionId === q.id).map(c => `
                            <div class="comment-item" style="margin:10px 0; padding:8px; border:1px solid #ddd; border-radius:5px;">
                                <strong>${sanitize(c.userName)}</strong>: ${sanitize(c.content)}
                                ${c.userId === uid ? `<button class="btn btn-sm btn-outline delete-c" data-id="${c.id}" style="float:right;">Delete</button>` : ""}
                            </div>
                        `).join("")}
                    </div>
                    <form class="comment-form" data-qid="${q.id}" style="margin-top:10px;">
                        <textarea class="form-control" rows="2" placeholder="Write a comment..." required></textarea>
                        <button type="submit" class="btn btn-primary btn-sm" style="margin-top:5px;">Comment</button>
                    </form>
                `;

                // delete question
                const delQ = div.querySelector(".delete-q");
                if (delQ) {
                    delQ.addEventListener("click", () => {
                        if (confirm("Delete this question?")) {
                            setQuestions(getQuestions().filter(x => x.id !== q.id));
                            loadQuestions();
                        }
                    });
                }

                // delete comments
                div.querySelectorAll(".delete-c").forEach(btn => {
                    btn.addEventListener("click", () => {
                        const cid = btn.dataset.id;
                        setComments(getComments().filter(c => c.id !== cid));
                        loadQuestions();
                    });
                });

                // add comment
                const form = div.querySelector(".comment-form");
                form.addEventListener("submit", e => {
                    e.preventDefault();
                    const txt = form.querySelector("textarea").value.trim();
                    if (!txt) return;
                    const newComment = {
                        id: Date.now().toString(),
                        questionId: q.id,
                        userId: uid,
                        userName: localStorage.getItem("userName") || "User",
                        content: txt,
                        timestamp: Date.now()
                    };
                    const all = getComments();
                    all.push(newComment);
                    setComments(all);

                    // award points
                    const pts = parseInt(localStorage.getItem("userPoints") || "0", 10) + 10;
                    localStorage.setItem("userPoints", pts.toString());
                    updateUserUI();

                    // Create notification for question owner
                    if (q.userId !== uid) {
                        createNotification('comment', `${localStorage.getItem('userName')} commented on your question: "${q.title}"`, q.id, q.userId);
                    }

                    loadQuestions();
                });

                container.appendChild(div);
            });
        }

        function loadQuestions() {
            const qs = getQuestions();
            renderQuestions(qs, document.getElementById("all-questions-list"));
            renderQuestions(qs, document.getElementById("my-questions-list"), { ownerOnly: true });
        }

        // Post new question
        let questionForm = document.getElementById("questionForm");
        if (questionForm) {
            // remove any previous listeners by cloning
            const clone = questionForm.cloneNode(true);
            questionForm.parentNode.replaceChild(clone, questionForm);
            questionForm = clone;

            questionForm.addEventListener("submit", e => {
                e.preventDefault();

                const title = sanitize(document.getElementById("questionTitle").value);
                const content = sanitize(document.getElementById("questionContent").value);
                const tags = sanitize(document.getElementById("questionTags").value)
                                .split(",")
                                .map(t => t.trim())
                                .filter(Boolean);

                if (!title || !content) {
                    alert("Please fill in both title and details.");
                    return;
                }

                const uid = currentUserId();
                const uname = localStorage.getItem("userName") || "User";

                const newQ = {
                    id: Date.now().toString(),
                    title,
                    content,
                    tags,
                    userId: uid,
                    userName: uname,
                    timestamp: Date.now()
                };

                const all = getQuestions();
                all.unshift(newQ); // newest first
                setQuestions(all);

                // award points
                const pts = parseInt(localStorage.getItem("userPoints") || "0", 10) + 20;
                localStorage.setItem("userPoints", pts.toString());
                updateUserUI();

                // Create notification
                createNotification('system', 'Your question has been posted successfully!', newQ.id);

                questionForm.reset();
                loadQuestions();
            });
        }

        /* --------------------------
           Init
        ---------------------------*/
        updateUserUI();
        loadExperiences();
        loadQuestions();
        renderTopContributors();
        setupResumeUpload();
        setupExperienceFilters();
        setupThemeToggle();
       
        // Mobile menu toggle
        document.querySelector('.mobile-menu-btn').addEventListener('click', () => {
            document.querySelector('.nav-links').classList.toggle('active');
        });

        // Add some sample notifications for demo
        setTimeout(() => {
            if (getNotifications().length === 0) {
                createNotification('system', 'Welcome to XShare! Start exploring and sharing experiences.');
                createNotification('comment', 'Alex Johnson commented on your experience about Google', 1);
                createNotification('like', 'Sarah Williams liked your question about interview preparation', 101);
                createNotification('connection', 'Michael Chen accepted your connection request');
                createNotification('job', 'We found 5 new jobs matching your skills', null, null, 'high');
                createNotification('event', 'Google hiring event this Friday - don\'t forget to register!', null, null, 'medium');
                createNotification('message', 'You have a new message from Alex Johnson');
            }
        }, 1000);
        // Initialize theme toggle
setupThemeToggle();
    </script>
</body>
</html>
